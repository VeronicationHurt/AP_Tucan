/* all.min.js - PhotoBlogger skin scripts */
var VER='1.8.3',DEBUG=false;
Texts={closeWindow:'Close window',okButton:'OK',warning:'Warning',error:'Error',addCart:'Add to Cart',shoppingCart:'Shopping cart',edit:'Edit',continueShopping:'Continue shopping',added:'Added...',buyNow:'Buy Now',processedByPaypal:'Payment processed by PayPal',viewCart:'View Cart',emptyCart:'Empty Cart',removeAllItems:'Remove all items?',yes:'Yes',no:'No',item:'item',items:'items',success:'Success',couponCode:'Coupon code',redeem:'Redeem',noSuch:'No such coupon exists!',expired:'The coupon code <b>{0}</b> has expired!',lowerThanCurrent:'This coupon offers lower discount than the current <b>{0}</b>.',reclaimed:'This coupon has already been used!',select:'Select',all:'All',none:'None',shoppingcartInfo:'This item has been added to the &#34;Shopping cart&#34;. You can buy it by clicking the &#34;Buy now&#34; button after you quit the lightbox.',subtotal:'Subtotal',total:'Total',shippingAndHandling:'Shipping and handling',reduction:'Reduction',discount:'Discount',tax:'Tax',remove:'Remove',couponAccepted:'Coupon code accepted, discounting <b>{0}</b>.',couponRemoved:'Coupon has been removed.',amountLowerThan:'The amount is lower than the discount <b>{0}</b>.',addMoreItems:'Add {0} more item(s) to use this coupon!',validAbove:'Valid only above {0} cart value.',higherThanTotal:'Coupon provides higher discount (<b>{0}</b>) than the cart total.',minAmountWarning:'This coupon can only be used if the total amount exceeds <b>{0}</b>.',minQuantityWarning:'This coupon can only be used if the number of items exceeds <b>{0}</b>.',maxNItems:'Maximum <b>{0}</b> items allowed!',close:'Close',slideshow:'Slideshow',pause:'Pause',toggleZoom:'Toggle Zoom',download:'Download',print:'Print',buyImage:'Buy image',photoData:'Photo data',map:'Map',clickToOpen:'Click to open this document with the associated viewer',share:'Share',shareOn:'Share on',checkThisOut:'Found this page',localWarning:'CanÂ´t share local albums. Please upload your album first!',foundNTimes:'{0} image(s)',notFound:'not found',search:'Search',newImages:'New images',label:'Label',return:'return',and:'and',today:'today',inTheLastDay:'in the last day',inThePastNDays:'in the past {0} days',inThePastNMonths:'in the past {0} months',inThePastNYears:'in the past {0} years',sinceMyLastVisit:'since my last visit',imagesAdded:'Images added',imagesModified:'Images modified',imagesTaken:'Images taken',more:'more',less:'less',locationWarning:'Works only when uploaded',cookiePolicyText:'This album uses cookies to remember user preferences. By using it, you agree to our use of cookies.',cookiePolicyAgree:'Got it',cookiePolicyLearnMore:'Learn more'};
function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(t){"use strict";function e(t){if(void 0===Function.prototype.name){var e=/function\s([^(]{1,})\(/,n=e.exec(t.toString());return n&&n.length>1?n[1].trim():""}return void 0===t.prototype?t.constructor.name:t.prototype.constructor.name}function n(t){return"true"===t?!0:"false"===t?!1:isNaN(1*t)?t:parseFloat(t)}function i(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var o="6.3.0",s={version:o,_plugins:{},_uuids:[],rtl:function(){return"rtl"===t("html").attr("dir")},plugin:function(t,n){var o=n||e(t),s=i(o);this._plugins[s]=this[o]=t},registerPlugin:function(t,n){var o=n?i(n):e(t.constructor).toLowerCase();t.uuid=this.GetYoDigits(6,o),t.$element.attr("data-"+o)||t.$element.attr("data-"+o,t.uuid),t.$element.data("zfPlugin")||t.$element.data("zfPlugin",t),t.$element.trigger("init.zf."+o),this._uuids.push(t.uuid)},unregisterPlugin:function(t){var n=i(e(t.$element.data("zfPlugin").constructor));this._uuids.splice(this._uuids.indexOf(t.uuid),1),t.$element.removeAttr("data-"+n).removeData("zfPlugin").trigger("destroyed.zf."+n);for(var o in t)t[o]=null},reInit:function(e){var n=e instanceof t;try{if(n)e.each(function(){t(this).data("zfPlugin")._init()});else{var o=typeof e,s=this,a={object:function(e){e.forEach(function(e){e=i(e),t("[data-"+e+"]").foundation("_init")})},string:function(){e=i(e),t("[data-"+e+"]").foundation("_init")},undefined:function(){this.object(Object.keys(s._plugins))}};a[o](e)}}catch(r){console.error(r)}finally{return e}},GetYoDigits:function(t,e){return t=t||6,Math.round(Math.pow(36,t+1)-Math.random()*Math.pow(36,t)).toString(36).slice(1)+(e?"-"+e:"")},reflow:function(e,i){"undefined"==typeof i?i=Object.keys(this._plugins):"string"==typeof i&&(i=[i]);var o=this;t.each(i,function(i,s){var a=o._plugins[s],r=t(e).find("[data-"+s+"]").addBack("[data-"+s+"]");r.each(function(){var e=t(this),i={};if(e.data("zfPlugin"))return void console.warn("Tried to initialize "+s+" on an element that already has a Foundation plugin.");if(e.attr("data-options")){e.attr("data-options").split(";").forEach(function(t){var e=t.split(":").map(function(t){return t.trim()});e[0]&&(i[e[0]]=n(e[1]))})}try{e.data("zfPlugin",new a(t(this),i))}catch(o){console.error(o)}finally{return}})})},getFnName:e,transitionend:function(t){var e,n={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend"},i=document.createElement("div");for(var o in n)"undefined"!=typeof i.style[o]&&(e=n[o]);return e?e:(e=setTimeout(function(){t.triggerHandler("transitionend",[t])},1),"transitionend")}};s.util={throttle:function(t,e){var n=null;return function(){var i=this,o=arguments;null===n&&(n=setTimeout(function(){t.apply(i,o),n=null},e))}}};var a=function(n){var i=typeof n,o=t("meta.foundation-mq"),a=t(".no-js");if(o.length||t('<meta class="foundation-mq">').appendTo(document.head),a.length&&a.removeClass("no-js"),"undefined"===i)s.MediaQuery._init(),s.reflow(this);else{if("string"!==i)throw new TypeError("We're sorry, "+i+" is not a valid parameter. You must use a string representing the method you wish to invoke.");var r=Array.prototype.slice.call(arguments,1),l=this.data("zfPlugin");if(void 0===l||void 0===l[n])throw new ReferenceError("We're sorry, '"+n+"' is not an available method for "+(l?e(l):"this element")+".");1===this.length?l[n].apply(l,r):this.each(function(e,i){l[n].apply(t(i).data("zfPlugin"),r)})}return this};window.Foundation=s,t.fn.foundation=a,function(){Date.now&&window.Date.now||(window.Date.now=Date.now=function(){return(new Date).getTime()});for(var t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var n=t[e];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var i=0;window.requestAnimationFrame=function(t){var e=Date.now(),n=Math.max(i+16,e);return setTimeout(function(){t(i=n)},n-e)},window.cancelAnimationFrame=clearTimeout}window.performance&&window.performance.now||(window.performance={start:Date.now(),now:function(){return Date.now()-this.start}})}(),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},o=function(){return n.apply(this instanceof i?this:t,e.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(i.prototype=this.prototype),o.prototype=new i,o})}(jQuery),!function(t){function e(t){var e={};return"string"!=typeof t?e:(t=t.trim().slice(1,-1))?e=t.split("&").reduce(function(t,e){var n=e.replace(/\+/g," ").split("="),i=n[0],o=n[1];return i=decodeURIComponent(i),o=void 0===o?null:decodeURIComponent(o),t.hasOwnProperty(i)?Array.isArray(t[i])?t[i].push(o):t[i]=[t[i],o]:t[i]=o,t},{}):e}var n={queries:[],current:"",_init:function(){var n,i=this,o=t(".foundation-mq").css("font-family");n=e(o);for(var s in n)n.hasOwnProperty(s)&&i.queries.push({name:s,value:"only screen and (min-width: "+n[s]+")"});this.current=this._getCurrentSize(),this._watcher()},atLeast:function(t){var e=this.get(t);return e?window.matchMedia(e).matches:!1},is:function(t){return t=t.trim().split(" "),t.length>1&&"only"===t[1]?t[0]===this._getCurrentSize()?!0:!1:this.atLeast(t[0])},get:function(t){for(var e in this.queries)if(this.queries.hasOwnProperty(e)){var n=this.queries[e];if(t===n.name)return n.value}return null},_getCurrentSize:function(){for(var t,e=0;e<this.queries.length;e++){var n=this.queries[e];window.matchMedia(n.value).matches&&(t=n)}return"object"==typeof t?t.name:t},_watcher:function(){var e=this;t(window).on("resize.zf.mediaquery",function(){var n=e._getCurrentSize(),i=e.current;n!==i&&(e.current=n,t(window).trigger("changed.zf.mediaquery",[n,i]))})}};Foundation.MediaQuery=n,window.matchMedia||(window.matchMedia=function(){"use strict";var t=window.styleMedia||window.media;if(!t){var e=document.createElement("style"),n=document.getElementsByTagName("script")[0],i=null;e.type="text/css",e.id="matchmediajs-test",n&&n.parentNode&&n.parentNode.insertBefore(e,n),i="getComputedStyle"in window&&window.getComputedStyle(e,null)||e.currentStyle,t={matchMedium:function(t){var n="@media "+t+"{ #matchmediajs-test { width: 1px; } }";return e.styleSheet?e.styleSheet.cssText=n:e.textContent=n,"1px"===i.width}}}return function(e){return{matches:t.matchMedium(e||"all"),media:e||"all"}}}()),Foundation.MediaQuery=n}(jQuery),!function(t){function e(t){var e={};for(var n in t)e[t[n]]=t[n];return e}var n={9:"TAB",13:"ENTER",27:"ESCAPE",32:"SPACE",37:"ARROW_LEFT",38:"ARROW_UP",39:"ARROW_RIGHT",40:"ARROW_DOWN"},i={},o={keys:e(n),parseKey:function(t){var e=n[t.which||t.keyCode]||String.fromCharCode(t.which).toUpperCase();return e=e.replace(/\W+/,""),t.shiftKey&&(e="SHIFT_"+e),t.ctrlKey&&(e="CTRL_"+e),t.altKey&&(e="ALT_"+e),e=e.replace(/_$/,"")},handleKey:function(e,n,o){var s,a,r,l=i[n],u=this.parseKey(e);if(!l)return console.warn("Component not defined!");if(s="undefined"==typeof l.ltr?l:Foundation.rtl()?t.extend({},l.ltr,l.rtl):t.extend({},l.rtl,l.ltr),a=s[u],r=o[a],r&&"function"==typeof r){var d=r.apply();(o.handled||"function"==typeof o.handled)&&o.handled(d)}else(o.unhandled||"function"==typeof o.unhandled)&&o.unhandled()},findFocusable:function(e){return e?e.find("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(function(){return!t(this).is(":visible")||t(this).attr("tabindex")<0?!1:!0}):!1},register:function(t,e){i[t]=e},trapFocus:function(t){var e=Foundation.Keyboard.findFocusable(t),n=e.eq(0),i=e.eq(-1);t.on("keydown.zf.trapfocus",function(t){t.target===i[0]&&"TAB"===Foundation.Keyboard.parseKey(t)?(t.preventDefault(),n.focus()):t.target===n[0]&&"SHIFT_TAB"===Foundation.Keyboard.parseKey(t)&&(t.preventDefault(),i.focus())})},releaseFocus:function(t){t.off("keydown.zf.trapfocus")}};Foundation.Keyboard=o}(jQuery),!function(t){function e(t,e,n){function i(r){a||(a=r),s=r-a,n.apply(e),t>s?o=window.requestAnimationFrame(i,e):(window.cancelAnimationFrame(o),e.trigger("finished.zf.animate",[e]).triggerHandler("finished.zf.animate",[e]))}var o,s,a=null;return 0===t?(n.apply(e),void e.trigger("finished.zf.animate",[e]).triggerHandler("finished.zf.animate",[e])):void(o=window.requestAnimationFrame(i))}function n(e,n,s,a){function r(){e||n.hide(),l(),a&&a.apply(n)}function l(){n[0].style.transitionDuration=0,n.removeClass(u+" "+d+" "+s)}if(n=t(n).eq(0),n.length){var u=e?i[0]:i[1],d=e?o[0]:o[1];l(),n.addClass(s).css("transition","none"),requestAnimationFrame(function(){n.addClass(u),e&&n.show()}),requestAnimationFrame(function(){n[0].offsetWidth,n.css("transition","").addClass(d)}),n.one(Foundation.transitionend(n),r)}}var i=["mui-enter","mui-leave"],o=["mui-enter-active","mui-leave-active"],s={animateIn:function(t,e,i){n(!0,t,e,i)},animateOut:function(t,e,i){n(!1,t,e,i)}};Foundation.Move=e,Foundation.Motion=s}(jQuery),!function(){function t(t,n,i,o){var s,a,r,l,u=e(t);if(n){var d=e(n);a=u.offset.top+u.height<=d.height+d.offset.top,s=u.offset.top>=d.offset.top,r=u.offset.left>=d.offset.left,l=u.offset.left+u.width<=d.width+d.offset.left}else a=u.offset.top+u.height<=u.windowDims.height+u.windowDims.offset.top,s=u.offset.top>=u.windowDims.offset.top,r=u.offset.left>=u.windowDims.offset.left,l=u.offset.left+u.width<=u.windowDims.width;var h=[a,s,r,l];return i?r===l==!0:o?s===a==!0:-1===h.indexOf(!1)}function e(t){if(t=t.length?t[0]:t,t===window||t===document)throw new Error("I'm sorry, Dave. I'm afraid I can't do that.");var e=t.getBoundingClientRect(),n=t.parentNode.getBoundingClientRect(),i=document.body.getBoundingClientRect(),o=window.pageYOffset,s=window.pageXOffset;return{width:e.width,height:e.height,offset:{top:e.top+o,left:e.left+s},parentDims:{width:n.width,height:n.height,offset:{top:n.top+o,left:n.left+s}},windowDims:{width:i.width,height:i.height,offset:{top:o,left:s}}}}function n(t,n,i,o,s,a){var r=e(t),l=n?e(n):null;switch(i){case"top":return{left:Foundation.rtl()?l.offset.left-r.width+l.width:l.offset.left,top:l.offset.top-(r.height+o)};case"left":return{left:l.offset.left-(r.width+s),top:l.offset.top};case"right":return{left:l.offset.left+l.width+s,top:l.offset.top};case"center top":return{left:l.offset.left+l.width/2-r.width/2,top:l.offset.top-(r.height+o)};case"center bottom":return{left:a?s:l.offset.left+l.width/2-r.width/2,top:l.offset.top+l.height+o};case"center left":return{left:l.offset.left-(r.width+s),top:l.offset.top+l.height/2-r.height/2};case"center right":return{left:l.offset.left+l.width+s+1,top:l.offset.top+l.height/2-r.height/2};case"center":return{left:r.windowDims.offset.left+r.windowDims.width/2-r.width/2,top:r.windowDims.offset.top+r.windowDims.height/2-r.height/2};case"reveal":return{left:(r.windowDims.width-r.width)/2,top:r.windowDims.offset.top+o};case"reveal full":return{left:r.windowDims.offset.left,top:r.windowDims.offset.top};case"left bottom":return{left:l.offset.left,top:l.offset.top+l.height+o};case"right bottom":return{left:l.offset.left+l.width+s-r.width,top:l.offset.top+l.height+o};default:return{left:Foundation.rtl()?l.offset.left-r.width+l.width:l.offset.left+s,top:l.offset.top+l.height+o}}}Foundation.Box={ImNotTouchingYou:t,GetDimensions:e,GetOffsets:n}}(jQuery),!function(t){var e={Feather:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zf";e.attr("role","menubar");var i=e.find("li").attr({role:"menuitem"}),o="is-"+n+"-submenu",s=o+"-item",a="is-"+n+"-submenu-parent";i.each(function(){var e=t(this),i=e.children("ul");i.length&&(e.addClass(a).attr({"aria-haspopup":!0,"aria-label":e.children("a:first").text()}),"drilldown"===n&&e.attr({"aria-expanded":!1}),i.addClass("submenu "+o).attr({"data-submenu":"",role:"menu"}),"drilldown"===n&&i.attr({"aria-hidden":!0})),e.parent("[data-submenu]").length&&e.addClass("is-submenu-item "+s)})},Burn:function(t,e){var n="is-"+e+"-submenu",i=n+"-item",o="is-"+e+"-submenu-parent";t.find(">li, .menu, .menu > li").removeClass(n+" "+i+" "+o+" is-submenu-item submenu is-active").removeAttr("data-submenu").css("display","")}};Foundation.Nest=e}(jQuery),!function(t){function e(){a(),i(),o(),s(),n()}function n(e){var n=t("[data-yeti-box]"),i=["dropdown","tooltip","reveal"];if(e&&("string"==typeof e?i.push(e):"object"==typeof e&&"string"==typeof e[0]?i.concat(e):console.error("Plugin names must be strings")),n.length){var o=i.map(function(t){return"closeme.zf."+t}).join(" ");t(window).off(o).on(o,function(e,n){var i=e.namespace.split(".")[0],o=t("[data-"+i+"]").not('[data-yeti-box="'+n+'"]');o.each(function(){var e=t(this);e.triggerHandler("close.zf.trigger",[e])})})}}function i(e){var n=void 0,i=t("[data-resize]");i.length&&t(window).off("resize.zf.trigger").on("resize.zf.trigger",function(){n&&clearTimeout(n),n=setTimeout(function(){r||i.each(function(){t(this).triggerHandler("resizeme.zf.trigger")}),i.attr("data-events","resize")},e||10)})}function o(e){var n=void 0,i=t("[data-scroll]");i.length&&t(window).off("scroll.zf.trigger").on("scroll.zf.trigger",function(){n&&clearTimeout(n),n=setTimeout(function(){r||i.each(function(){t(this).triggerHandler("scrollme.zf.trigger")}),i.attr("data-events","scroll")},e||10)})}function s(){var e=t("[data-mutate]");e.length&&r&&e.each(function(){t(this).triggerHandler("mutateme.zf.trigger")})}function a(){if(!r)return!1;var e=document.querySelectorAll("[data-resize], [data-scroll], [data-mutate]"),n=function(e){var n=t(e[0].target);switch(e[0].type){case"attributes":"scroll"===n.attr("data-events")&&"data-events"===e[0].attributeName&&n.triggerHandler("scrollme.zf.trigger",[n,window.pageYOffset]),"resize"===n.attr("data-events")&&"data-events"===e[0].attributeName&&n.triggerHandler("resizeme.zf.trigger",[n]),"style"===e[0].attributeName&&(n.closest("[data-mutate]").attr("data-events","mutate"),n.closest("[data-mutate]").triggerHandler("mutateme.zf.trigger",[n.closest("[data-mutate]")]));break;case"childList":n.closest("[data-mutate]").attr("data-events","mutate"),n.closest("[data-mutate]").triggerHandler("mutateme.zf.trigger",[n.closest("[data-mutate]")]);break;default:return!1}};if(e.length)for(var i=0;i<=e.length-1;i++){var o=new r(n);o.observe(e[i],{attributes:!0,childList:!0,characterData:!1,subtree:!0,attributeFilter:["data-events","style"]})}}var r=function(){for(var t=["WebKit","Moz","O","Ms",""],e=0;e<t.length;e++)if(t[e]+"MutationObserver"in window)return window[t[e]+"MutationObserver"];return!1}(),l=function(e,n){e.data(n).split(" ").forEach(function(i){t("#"+i)["close"===n?"trigger":"triggerHandler"](n+".zf.trigger",[e])})};t(document).on("click.zf.trigger","[data-open]",function(){l(t(this),"open")}),t(document).on("click.zf.trigger","[data-close]",function(){var e=t(this).data("close");e?l(t(this),"close"):t(this).trigger("close.zf.trigger")}),t(document).on("click.zf.trigger","[data-toggle]",function(){var e=t(this).data("toggle");e?l(t(this),"toggle"):t(this).trigger("toggle.zf.trigger")}),t(document).on("close.zf.trigger","[data-closable]",function(e){e.stopPropagation();var n=t(this).data("closable");""!==n?Foundation.Motion.animateOut(t(this),n,function(){t(this).trigger("closed.zf")}):t(this).fadeOut().trigger("closed.zf")}),t(document).on("focus.zf.trigger blur.zf.trigger","[data-toggle-focus]",function(){var e=t(this).data("toggle-focus");t("#"+e).triggerHandler("toggle.zf.trigger",[t(this)])}),t(window).on("load",function(){e()}),Foundation.IHearYou=e}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n,i){_classCallCheck(this,e),this.$element=n,this.options=t.extend({},e.defaults,this.$element.data(),i),Foundation.Nest.Feather(this.$element,"dropdown"),this._init(),Foundation.registerPlugin(this,"DropdownMenu"),Foundation.Keyboard.register("DropdownMenu",{ENTER:"open",SPACE:"open",ARROW_RIGHT:"next",ARROW_UP:"up",ARROW_DOWN:"down",ARROW_LEFT:"previous",ESCAPE:"close"})}return _createClass(e,[{key:"_init",value:function(){var t=this.$element.find("li.is-dropdown-submenu-parent");this.$element.children(".is-dropdown-submenu-parent").children(".is-dropdown-submenu").addClass("first-sub"),this.$menuItems=this.$element.find('[role="menuitem"]'),this.$tabs=this.$element.children('[role="menuitem"]'),this.$tabs.find("ul.is-dropdown-submenu").addClass(this.options.verticalClass),this.$element.hasClass(this.options.rightClass)||"right"===this.options.alignment||Foundation.rtl()||this.$element.parents(".top-bar-right").is("*")?(this.options.alignment="right",t.addClass("opens-left")):t.addClass("opens-right"),this.changed=!1,this._events()}},{key:"_isVertical",value:function(){return"block"===this.$tabs.css("display")}},{key:"_events",value:function(){var e=this,n="ontouchstart"in window||"undefined"!=typeof window.ontouchstart,i="is-dropdown-submenu-parent",o=function(o){var s=t(o.target).parentsUntil("ul","."+i),a=s.hasClass(i),r="true"===s.attr("data-is-click"),l=s.children(".is-dropdown-submenu");if(a)if(r){if(!e.options.closeOnClick||!e.options.clickOpen&&!n||e.options.forceFollow&&n)return;o.stopImmediatePropagation(),o.preventDefault(),e._hide(s)}else o.preventDefault(),o.stopImmediatePropagation(),e._show(l),s.add(s.parentsUntil(e.$element,"."+i)).attr("data-is-click",!0);else n&&"A"===o.target.nodeName&&(window.location.href=o.target.href)};(this.options.clickOpen||n)&&this.$menuItems.on("click.zf.dropdownmenu touchstart.zf.dropdownmenu",o),e.options.closeOnClickInside&&this.$menuItems.on("click.zf.dropdownmenu touchend.zf.dropdownmenu",function(){var n=t(this),o=n.hasClass(i);o||e._hide()}),this.options.disableHover||this.$menuItems.on("mouseenter.zf.dropdownmenu",function(){var n=t(this),o=n.hasClass(i);o&&(clearTimeout(n.data("_delay")),n.data("_delay",setTimeout(function(){e._show(n.children(".is-dropdown-submenu"))},e.options.hoverDelay)))}).on("mouseleave.zf.dropdownmenu",function(){var n=t(this),o=n.hasClass(i);if(o&&e.options.autoclose){if("true"===n.attr("data-is-click")&&e.options.clickOpen)return!1;clearTimeout(n.data("_delay")),n.data("_delay",setTimeout(function(){e._hide(n)},e.options.closingTime))}}),this.$menuItems.on("keydown.zf.dropdownmenu",function(n){var i,o,s=t(n.target).parentsUntil("ul",'[role="menuitem"]'),a=e.$tabs.index(s)>-1,r=a?e.$tabs:s.siblings("li").add(s);r.each(function(e){return t(this).is(s)?(i=r.eq(e-1),void(o=r.eq(e+1))):void 0});var l=function(){s.is(":last-child")||(o.children("a:first").focus(),n.preventDefault())},u=function(){i.children("a:first").focus(),n.preventDefault()},d=function(){var t=s.children("ul.is-dropdown-submenu");t.length&&(e._show(t),s.find("li > a:first").focus(),n.preventDefault())},h=function(){var t=s.parent("ul").parent("li");t.children("a:first").focus(),e._hide(t),n.preventDefault()},f={open:d,close:function(){e._hide(e.$element),e.$menuItems.find("a:first").focus(),n.preventDefault()},handled:function(){n.stopImmediatePropagation()}};a?e._isVertical()?Foundation.rtl()?t.extend(f,{down:l,up:u,next:h,previous:d}):t.extend(f,{down:l,up:u,next:d,previous:h}):Foundation.rtl()?t.extend(f,{next:u,previous:l,down:d,up:h}):t.extend(f,{next:l,previous:u,down:d,up:h}):Foundation.rtl()?t.extend(f,{next:h,previous:d,down:l,up:u}):t.extend(f,{next:d,previous:h,down:l,up:u}),Foundation.Keyboard.handleKey(n,"DropdownMenu",f)})}},{key:"_addBodyHandler",value:function(){var e=t(document.body),n=this;e.off("mouseup.zf.dropdownmenu touchend.zf.dropdownmenu").on("mouseup.zf.dropdownmenu touchend.zf.dropdownmenu",function(t){var i=n.$element.find(t.target);i.length||(n._hide(),e.off("mouseup.zf.dropdownmenu touchend.zf.dropdownmenu"))})}},{key:"_show",value:function(e){var n=this.$tabs.index(this.$tabs.filter(function(n,i){return t(i).find(e).length>0})),i=e.parent("li.is-dropdown-submenu-parent").siblings("li.is-dropdown-submenu-parent");this._hide(i,n),e.css("visibility","hidden").addClass("js-dropdown-active").parent("li.is-dropdown-submenu-parent").addClass("is-active");var o=Foundation.Box.ImNotTouchingYou(e,null,!0);if(!o){var s="left"===this.options.alignment?"-right":"-left",a=e.parent(".is-dropdown-submenu-parent");a.removeClass("opens"+s).addClass("opens-"+this.options.alignment),o=Foundation.Box.ImNotTouchingYou(e,null,!0),o||a.removeClass("opens-"+this.options.alignment).addClass("opens-inner"),this.changed=!0}e.css("visibility",""),this.options.closeOnClick&&this._addBodyHandler(),this.$element.trigger("show.zf.dropdownmenu",[e])}},{key:"_hide",value:function(t,e){var n;n=t&&t.length?t:void 0!==e?this.$tabs.not(function(t){return t===e}):this.$element;var i=n.hasClass("is-active")||n.find(".is-active").length>0;if(i){if(n.find("li.is-active").add(n).attr({"data-is-click":!1}).removeClass("is-active"),n.find("ul.js-dropdown-active").removeClass("js-dropdown-active"),this.changed||n.find("opens-inner").length){var o="left"===this.options.alignment?"right":"left";n.find("li.is-dropdown-submenu-parent").add(n).removeClass("opens-inner opens-"+this.options.alignment).addClass("opens-"+o),this.changed=!1}this.$element.trigger("hide.zf.dropdownmenu",[n])}}},{key:"destroy",value:function(){this.$menuItems.off(".zf.dropdownmenu").removeAttr("data-is-click").removeClass("is-right-arrow is-left-arrow is-down-arrow opens-right opens-left opens-inner"),t(document.body).off(".zf.dropdownmenu"),Foundation.Nest.Burn(this.$element,"dropdown"),Foundation.unregisterPlugin(this)}}]),e}();e.defaults={disableHover:!1,autoclose:!0,hoverDelay:50,clickOpen:!1,closingTime:500,alignment:"left",closeOnClick:!0,closeOnClickInside:!0,verticalClass:"vertical",rightClass:"align-right",forceFollow:!0},Foundation.plugin(e,"DropdownMenu")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n){_classCallCheck(this,e),this.$element=t(n),this.rules=this.$element.data("responsive-menu"),this.currentMq=null,this.currentPlugin=null,this._init(),this._events(),Foundation.registerPlugin(this,"ResponsiveMenu")}return _createClass(e,[{key:"_init",value:function(){if("string"==typeof this.rules){for(var e={},i=this.rules.split(" "),o=0;o<i.length;o++){var s=i[o].split("-"),a=s.length>1?s[0]:"small",r=s.length>1?s[1]:s[0];null!==n[r]&&(e[a]=n[r])}this.rules=e}t.isEmptyObject(this.rules)||this._checkMediaQueries(),this.$element.attr("data-mutate",this.$element.attr("data-mutate")||Foundation.GetYoDigits(6,"responsive-menu"))}},{key:"_events",value:function(){var e=this;t(window).on("changed.zf.mediaquery",function(){e._checkMediaQueries()})}},{key:"_checkMediaQueries",value:function(){var e,i=this;t.each(this.rules,function(t){Foundation.MediaQuery.atLeast(t)&&(e=t)}),e&&(this.currentPlugin instanceof this.rules[e].plugin||(t.each(n,function(t,e){i.$element.removeClass(e.cssClass)}),this.$element.addClass(this.rules[e].cssClass),this.currentPlugin&&this.currentPlugin.destroy(),this.currentPlugin=new this.rules[e].plugin(this.$element,{})))}},{key:"destroy",value:function(){this.currentPlugin.destroy(),t(window).off(".zf.ResponsiveMenu"),Foundation.unregisterPlugin(this)}}]),e}();e.defaults={};var n={dropdown:{cssClass:"dropdown",plugin:Foundation._plugins["dropdown-menu"]||null},drilldown:{cssClass:"drilldown",plugin:Foundation._plugins.drilldown||null},accordion:{cssClass:"accordion-menu",plugin:Foundation._plugins["accordion-menu"]||null}};Foundation.plugin(e,"ResponsiveMenu")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n,i){_classCallCheck(this,e),this.$element=n,this.options=t.extend({},e.defaults,this.$element.data(),i),this._init(),Foundation.registerPlugin(this,"Dropdown"),Foundation.Keyboard.register("Dropdown",{ENTER:"open",SPACE:"open",ESCAPE:"close"})}return _createClass(e,[{key:"_init",value:function(){var e=this.$element.attr("id");this.$anchor=t(t('[data-toggle="'+e+'"]').length?'[data-toggle="'+e+'"]':'[data-open="'+e+'"]'),this.$anchor.attr({"aria-controls":e,"data-is-focus":!1,"data-yeti-box":e,"aria-haspopup":!0,"aria-expanded":!1}),this.$parent=this.options.parentClass?this.$element.parents("."+this.options.parentClass):null,this.options.positionClass=this.getPositionClass(),this.counter=4,this.usedPositions=[],this.$element.attr({"aria-hidden":"true","data-yeti-box":e,"data-resize":e,"aria-labelledby":this.$anchor[0].id||Foundation.GetYoDigits(6,"dd-anchor")}),this._events()}},{key:"getPositionClass",value:function(){var t=this.$element[0].className.match(/(top|left|right|bottom)/g);t=t?t[0]:"";var e=/float-(\S+)/.exec(this.$anchor[0].className);e=e?e[1]:"";var n=e?e+" "+t:t;return n}},{key:"_reposition",value:function(t){this.usedPositions.push(t?t:"bottom"),!t&&this.usedPositions.indexOf("top")<0?this.$element.addClass("top"):"top"===t&&this.usedPositions.indexOf("bottom")<0?this.$element.removeClass(t):"left"===t&&this.usedPositions.indexOf("right")<0?this.$element.removeClass(t).addClass("right"):"right"===t&&this.usedPositions.indexOf("left")<0?this.$element.removeClass(t).addClass("left"):!t&&this.usedPositions.indexOf("top")>-1&&this.usedPositions.indexOf("left")<0?this.$element.addClass("left"):"top"===t&&this.usedPositions.indexOf("bottom")>-1&&this.usedPositions.indexOf("left")<0?this.$element.removeClass(t).addClass("left"):this.$element.removeClass("left"===t&&this.usedPositions.indexOf("right")>-1&&this.usedPositions.indexOf("bottom")<0?t:"right"===t&&this.usedPositions.indexOf("left")>-1&&this.usedPositions.indexOf("bottom")<0?t:t),this.classChanged=!0,this.counter--}},{key:"_setPosition",value:function(){if("false"===this.$anchor.attr("aria-expanded"))return!1;{var t=this.getPositionClass(),e=Foundation.Box.GetDimensions(this.$element),n=(Foundation.Box.GetDimensions(this.$anchor),"left"===t?"left":"right"===t?"left":"top"),i="top"===n?"height":"width";"height"===i?this.options.vOffset:this.options.hOffset}if(e.width>=e.windowDims.width||!this.counter&&!Foundation.Box.ImNotTouchingYou(this.$element,this.$parent)){var o=e.windowDims.width,s=0;if(this.$parent){var a=Foundation.Box.GetDimensions(this.$parent),s=a.offset.left;a.width<o&&(o=a.width)}return this.$element.offset(Foundation.Box.GetOffsets(this.$element,this.$anchor,"center bottom",this.options.vOffset,this.options.hOffset+s,!0)).css({width:o-2*this.options.hOffset,height:"auto"}),this.classChanged=!0,!1}for(this.$element.offset(Foundation.Box.GetOffsets(this.$element,this.$anchor,t,this.options.vOffset,this.options.hOffset));!Foundation.Box.ImNotTouchingYou(this.$element,this.$parent,!0)&&this.counter;)this._reposition(t),this._setPosition()}},{key:"_events",value:function(){var e=this;this.$element.on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":this.close.bind(this),"toggle.zf.trigger":this.toggle.bind(this),"resizeme.zf.trigger":this._setPosition.bind(this)}),this.options.hover&&(this.$anchor.off("mouseenter.zf.dropdown mouseleave.zf.dropdown").on("mouseenter.zf.dropdown",function(){var n=t("body").data();("undefined"==typeof n.whatinput||"mouse"===n.whatinput)&&(clearTimeout(e.timeout),e.timeout=setTimeout(function(){e.open(),e.$anchor.data("hover",!0)},e.options.hoverDelay))}).on("mouseleave.zf.dropdown",function(){clearTimeout(e.timeout),e.timeout=setTimeout(function(){e.close(),e.$anchor.data("hover",!1)},e.options.hoverDelay)}),this.options.hoverPane&&this.$element.off("mouseenter.zf.dropdown mouseleave.zf.dropdown").on("mouseenter.zf.dropdown",function(){clearTimeout(e.timeout)}).on("mouseleave.zf.dropdown",function(){clearTimeout(e.timeout),e.timeout=setTimeout(function(){e.close(),e.$anchor.data("hover",!1)},e.options.hoverDelay)})),this.$anchor.add(this.$element).on("keydown.zf.dropdown",function(n){{var i=t(this);Foundation.Keyboard.findFocusable(e.$element)}Foundation.Keyboard.handleKey(n,"Dropdown",{open:function(){i.is(e.$anchor)&&(e.open(),e.$element.attr("tabindex",-1).focus(),n.preventDefault())},close:function(){e.close(),e.$anchor.focus()}})})}},{key:"_addBodyHandler",value:function(){var e=t(document.body).not(this.$element),n=this;e.off("click.zf.dropdown").on("click.zf.dropdown",function(t){n.$anchor.is(t.target)||n.$anchor.find(t.target).length||n.$element.find(t.target).length||(n.close(),e.off("click.zf.dropdown"))})}},{key:"open",value:function(){if(this.$element.trigger("closeme.zf.dropdown",this.$element.attr("id")),this.$anchor.addClass("hover").attr({"aria-expanded":!0}),this._setPosition(),this.$element.addClass("is-open").attr({"aria-hidden":!1}),this.options.autoFocus){var t=Foundation.Keyboard.findFocusable(this.$element);t.length&&t.eq(0).focus()}this.options.closeOnClick&&this._addBodyHandler(),this.options.trapFocus&&Foundation.Keyboard.trapFocus(this.$element),this.$element.trigger("show.zf.dropdown",[this.$element])}},{key:"close",value:function(){if(!this.$element.hasClass("is-open"))return!1;if(this.$element.removeClass("is-open").attr({"aria-hidden":!0}),this.$anchor.removeClass("hover").attr("aria-expanded",!1),this.classChanged){var t=this.getPositionClass();t&&this.$element.removeClass(t),this.$element.addClass(this.options.positionClass).css({height:"",width:""}),this.classChanged=!1,this.counter=4,this.usedPositions.length=0}this.$element.trigger("hide.zf.dropdown",[this.$element]),this.options.trapFocus&&Foundation.Keyboard.releaseFocus(this.$element)}},{key:"toggle",value:function(){if(this.$element.hasClass("is-open")){if(this.$anchor.data("hover"))return;this.close()}else this.open()}},{key:"destroy",value:function(){this.$element.off(".zf.trigger").hide(),this.$anchor.off(".zf.dropdown"),Foundation.unregisterPlugin(this)}}]),e}();e.defaults={parentClass:null,hoverDelay:250,hover:!1,hoverPane:!1,vOffset:1,hOffset:1,positionClass:"",trapFocus:!1,autoFocus:!1,closeOnClick:!1},Foundation.plugin(e,"Dropdown")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){function e(){return/iP(ad|hone|od).*OS/.test(window.navigator.userAgent)}function n(){return/Android/.test(window.navigator.userAgent)}function i(){return e()||n()}var o=function(){function e(n,i){_classCallCheck(this,e),this.$element=n,this.options=t.extend({},e.defaults,this.$element.data(),i),this._init(),Foundation.registerPlugin(this,"Reveal"),Foundation.Keyboard.register("Reveal",{ENTER:"open",SPACE:"open",ESCAPE:"close"})}return _createClass(e,[{key:"_init",value:function(){this.id=this.$element.attr("id"),this.isActive=!1,this.cached={mq:Foundation.MediaQuery.current},this.isMobile=i(),this.$anchor=t(t('[data-open="'+this.id+'"]').length?'[data-open="'+this.id+'"]':'[data-toggle="'+this.id+'"]'),this.$anchor.attr({"aria-controls":this.id,"aria-haspopup":!0,tabindex:0}),(this.options.fullScreen||this.$element.hasClass("full"))&&(this.options.fullScreen=!0,this.options.overlay=!1),this.options.overlay&&!this.$overlay&&(this.$overlay=this._makeOverlay(this.id)),this.$element.attr({role:"dialog","aria-hidden":!0,"data-yeti-box":this.id,"data-resize":this.id}),this.$overlay?this.$element.detach().appendTo(this.$overlay):(this.$element.detach().appendTo(t(this.options.appendTo)),this.$element.addClass("without-overlay")),this._events(),this.options.deepLink&&window.location.hash==="#"+this.id&&t(window).one("load.zf.reveal",this.open.bind(this))
}},{key:"_makeOverlay",value:function(){return t("<div></div>").addClass("reveal-overlay").appendTo(this.options.appendTo)}},{key:"_updatePosition",value:function(){var e,n,i=this.$element.outerWidth(),o=t(window).width(),s=this.$element.outerHeight(),a=t(window).height();e="auto"===this.options.hOffset?parseInt((o-i)/2,10):parseInt(this.options.hOffset,10),n="auto"===this.options.vOffset?s>a?parseInt(Math.min(100,a/10),10):parseInt((a-s)/4,10):parseInt(this.options.vOffset,10),this.$element.css({top:n+"px"}),this.$overlay&&"auto"===this.options.hOffset||(this.$element.css({left:e+"px"}),this.$element.css({margin:"0px"}))}},{key:"_events",value:function(){var e=this,n=this;this.$element.on({"open.zf.trigger":this.open.bind(this),"close.zf.trigger":function(i,o){return i.target===n.$element[0]||t(i.target).parents("[data-closable]")[0]===o?e.close.apply(e):void 0},"toggle.zf.trigger":this.toggle.bind(this),"resizeme.zf.trigger":function(){n._updatePosition()}}),this.$anchor.length&&this.$anchor.on("keydown.zf.reveal",function(t){(13===t.which||32===t.which)&&(t.stopPropagation(),t.preventDefault(),n.open())}),this.options.closeOnClick&&this.options.overlay&&this.$overlay.off(".zf.reveal").on("click.zf.reveal",function(e){e.target!==n.$element[0]&&!t.contains(n.$element[0],e.target)&&t.contains(document,e.target)&&n.close()}),this.options.deepLink&&t(window).on("popstate.zf.reveal:"+this.id,this._handleState.bind(this))}},{key:"_handleState",value:function(){window.location.hash!=="#"+this.id||this.isActive?this.close():this.open()}},{key:"open",value:function(){function e(){o.isMobile?(o.originalScrollPos||(o.originalScrollPos=window.pageYOffset),t("html, body").addClass("is-reveal-open")):t("body").addClass("is-reveal-open")}var n=this;if(this.options.deepLink){var i="#"+this.id;window.history.pushState?window.history.pushState(null,null,i):window.location.hash=i}this.isActive=!0,this.$element.css({visibility:"hidden"}).show().scrollTop(0),this.options.overlay&&this.$overlay.css({visibility:"hidden"}).show(),this._updatePosition(),this.$element.hide().css({visibility:""}),this.$overlay&&(this.$overlay.css({visibility:""}).hide(),this.$element.hasClass("fast")?this.$overlay.addClass("fast"):this.$element.hasClass("slow")&&this.$overlay.addClass("slow")),this.options.multipleOpened||this.$element.trigger("closeme.zf.reveal",this.id);var o=this;this.options.animationIn?!function(){var t=function(){o.$element.attr({"aria-hidden":!1,tabindex:-1}).focus(),e(),Foundation.Keyboard.trapFocus(o.$element)};n.options.overlay&&Foundation.Motion.animateIn(n.$overlay,"fade-in"),Foundation.Motion.animateIn(n.$element,n.options.animationIn,function(){n.$element&&(n.focusableElements=Foundation.Keyboard.findFocusable(n.$element),t())})}():(this.options.overlay&&this.$overlay.show(0),this.$element.show(this.options.showDelay)),this.$element.attr({"aria-hidden":!1,tabindex:-1}).focus(),Foundation.Keyboard.trapFocus(this.$element),this.$element.trigger("open.zf.reveal"),e(),setTimeout(function(){n._extraHandlers()},0)}},{key:"_extraHandlers",value:function(){var e=this;this.$element&&(this.focusableElements=Foundation.Keyboard.findFocusable(this.$element),this.options.overlay||!this.options.closeOnClick||this.options.fullScreen||t("body").on("click.zf.reveal",function(n){n.target!==e.$element[0]&&!t.contains(e.$element[0],n.target)&&t.contains(document,n.target)&&e.close()}),this.options.closeOnEsc&&t(window).on("keydown.zf.reveal",function(t){Foundation.Keyboard.handleKey(t,"Reveal",{close:function(){e.options.closeOnEsc&&(e.close(),e.$anchor.focus())}})}),this.$element.on("keydown.zf.reveal",function(n){var i=t(this);Foundation.Keyboard.handleKey(n,"Reveal",{open:function(){e.$element.find(":focus").is(e.$element.find("[data-close]"))?setTimeout(function(){e.$anchor.focus()},1):i.is(e.focusableElements)&&e.open()},close:function(){e.options.closeOnEsc&&(e.close(),e.$anchor.focus())},handled:function(t){t&&n.preventDefault()}})}))}},{key:"close",value:function(){function e(){n.isMobile?(t("html, body").removeClass("is-reveal-open"),n.originalScrollPos&&(t("body").scrollTop(n.originalScrollPos),n.originalScrollPos=null)):t("body").removeClass("is-reveal-open"),Foundation.Keyboard.releaseFocus(n.$element),n.$element.attr("aria-hidden",!0),n.$element.trigger("closed.zf.reveal")}if(!this.isActive||!this.$element.is(":visible"))return!1;var n=this;this.options.animationOut?(this.options.overlay?Foundation.Motion.animateOut(this.$overlay,"fade-out",e):e(),Foundation.Motion.animateOut(this.$element,this.options.animationOut)):(this.options.overlay?this.$overlay.hide(0,e):e(),this.$element.hide(this.options.hideDelay)),this.options.closeOnEsc&&t(window).off("keydown.zf.reveal"),!this.options.overlay&&this.options.closeOnClick&&t("body").off("click.zf.reveal"),this.$element.off("keydown.zf.reveal"),this.options.resetOnClose&&this.$element.html(this.$element.html()),this.isActive=!1,n.options.deepLink&&(window.history.replaceState?window.history.replaceState("",document.title,window.location.href.replace("#"+this.id,"")):window.location.hash="")}},{key:"toggle",value:function(){this.isActive?this.close():this.open()}},{key:"destroy",value:function(){this.options.overlay&&(this.$element.appendTo(t(this.options.appendTo)),this.$overlay.hide().off().remove()),this.$element.hide().off(),this.$anchor.off(".zf"),t(window).off(".zf.reveal:"+this.id),Foundation.unregisterPlugin(this)}}]),e}();o.defaults={animationIn:"",animationOut:"",showDelay:0,hideDelay:0,closeOnClick:!0,closeOnEsc:!0,multipleOpened:!1,vOffset:"auto",hOffset:"auto",fullScreen:!1,btmOffsetPct:10,overlay:!0,resetOnClose:!1,deepLink:!1,appendTo:"body"},Foundation.plugin(o,"Reveal")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n,i){_classCallCheck(this,e),this.$element=t(n),this.options=t.extend({},e.defaults,this.$element.data(),i),this._init(),this._events(),Foundation.registerPlugin(this,"ResponsiveToggle")}return _createClass(e,[{key:"_init",value:function(){var e=this.$element.data("responsive-toggle");if(e||console.error("Your tab bar needs an ID of a Menu as the value of data-tab-bar."),this.$targetMenu=t("#"+e),this.$toggler=this.$element.find("[data-toggle]"),this.options=t.extend({},this.options,this.$targetMenu.data()),this.options.animate){var n=this.options.animate.split(" ");this.animationIn=n[0],this.animationOut=n[1]||null}this._update()}},{key:"_events",value:function(){this._updateMqHandler=this._update.bind(this),t(window).on("changed.zf.mediaquery",this._updateMqHandler),this.$toggler.on("click.zf.responsiveToggle",this.toggleMenu.bind(this))}},{key:"_update",value:function(){Foundation.MediaQuery.atLeast(this.options.hideFor)?(this.$element.hide(),this.$targetMenu.show()):(this.$element.show(),this.$targetMenu.hide())}},{key:"toggleMenu",value:function(){var t=this;Foundation.MediaQuery.atLeast(this.options.hideFor)||(this.options.animate?this.$targetMenu.is(":hidden")?Foundation.Motion.animateIn(this.$targetMenu,this.animationIn,function(){t.$element.trigger("toggled.zf.responsiveToggle"),t.$targetMenu.find("[data-mutate]").triggerHandler("mutateme.zf.trigger")}):Foundation.Motion.animateOut(this.$targetMenu,this.animationOut,function(){t.$element.trigger("toggled.zf.responsiveToggle")}):(this.$targetMenu.toggle(0),this.$targetMenu.find("[data-mutate]").trigger("mutateme.zf.trigger"),this.$element.trigger("toggled.zf.responsiveToggle")))}},{key:"destroy",value:function(){this.$element.off(".zf.responsiveToggle"),this.$toggler.off(".zf.responsiveToggle"),t(window).off("changed.zf.mediaquery",this._updateMqHandler),Foundation.unregisterPlugin(this)}}]),e}();e.defaults={hideFor:"medium",animate:!1},Foundation.plugin(e,"ResponsiveToggle")}(jQuery);var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){var e=function(){function e(n,i){_classCallCheck(this,e),this.$element=n,this.options=t.extend({},e.defaults,n.data(),i),this.className="",this._init(),this._events(),Foundation.registerPlugin(this,"Toggler")}return _createClass(e,[{key:"_init",value:function(){var e;this.options.animate?(e=this.options.animate.split(" "),this.animationIn=e[0],this.animationOut=e[1]||null):(e=this.$element.data("toggler"),this.className="."===e[0]?e.slice(1):e);var n=this.$element[0].id;t('[data-open="'+n+'"], [data-close="'+n+'"], [data-toggle="'+n+'"]').attr("aria-controls",n),this.$element.attr("aria-expanded",this.$element.is(":hidden")?!1:!0)}},{key:"_events",value:function(){this.$element.off("toggle.zf.trigger").on("toggle.zf.trigger",this.toggle.bind(this))}},{key:"toggle",value:function(){this[this.options.animate?"_toggleAnimate":"_toggleClass"]()}},{key:"_toggleClass",value:function(){this.$element.toggleClass(this.className);var t=this.$element.hasClass(this.className);this.$element.trigger(t?"on.zf.toggler":"off.zf.toggler"),this._updateARIA(t),this.$element.find("[data-mutate]").trigger("mutateme.zf.trigger")}},{key:"_toggleAnimate",value:function(){var t=this;this.$element.is(":hidden")?Foundation.Motion.animateIn(this.$element,this.animationIn,function(){t._updateARIA(!0),this.trigger("on.zf.toggler"),this.find("[data-mutate]").trigger("mutateme.zf.trigger")}):Foundation.Motion.animateOut(this.$element,this.animationOut,function(){t._updateARIA(!1),this.trigger("off.zf.toggler"),this.find("[data-mutate]").trigger("mutateme.zf.trigger")})}},{key:"_updateARIA",value:function(t){this.$element.attr("aria-expanded",t?!0:!1)}},{key:"destroy",value:function(){this.$element.off(".zf.toggler"),Foundation.unregisterPlugin(this)}}]),e}();e.defaults={animate:!1},Foundation.plugin(e,"Toggler")}(jQuery);
window.console=window.console||function(){return{log:function(){}}}(),String.wsp=[],String.wsp[9]=!0,String.wsp[10]=!0,String.wsp[11]=!0,String.wsp[12]=!0,String.wsp[13]=!0,String.wsp[32]=!0,String.wsp[133]=!0,String.wsp[160]=!0,String.wsp[5760]=!0,String.wsp[6158]=!0,String.wsp[8192]=!0,String.wsp[8193]=!0,String.wsp[8194]=!0,String.wsp[8195]=!0,String.wsp[8196]=!0,String.wsp[8197]=!0,String.wsp[8198]=!0,String.wsp[8199]=!0,String.wsp[8200]=!0,String.wsp[8201]=!0,String.wsp[8202]=!0,String.wsp[8203]=!0,String.wsp[8232]=!0,String.wsp[8233]=!0,String.wsp[8239]=!0,String.wsp[8287]=!0,String.wsp[12288]=!0,String.prototype.trim=function(){var t=this+"",n=t.length;if(n){var e=String.wsp,r=0;for(--n;n>=0&&e[t.charCodeAt(n)];)--n;for(++n;n>r&&e[t.charCodeAt(r)];)++r;t=t.substring(r,n)}return t},String.prototype.trunc=function(t){var n=this+"";if(n.length<=t)return n.toString();var e=n.substring(0,t-1),r=e.lastIndexOf(" ");return(r>6&&e.length-r<20?e.substring(0,r):e)+"..."},String.prototype.startsWith=function(t){return 0===(this+"").indexOf(t)},String.prototype.endsWith=function(t){return(this+"").substring(this.length-t.length)===t},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.unCamelCase=function(){return this.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},String.prototype.getExt=function(){var t=this+"",n=t.lastIndexOf(".");return 0>=n||n>=t.length-1?"":t.substring(n+1).toLowerCase()},String.prototype.hasExt=function(t){var n=this+"",e=n.lastIndexOf(".");return e>=0?(n=n.substring(e+1).toLowerCase(),(t+",").indexOf(n+",")>=0):!1},String.prototype.replaceExt=function(t){var n=this+"",e=n.lastIndexOf(".");return 0>=e?n:n.substring(0,e+1)+t},String.prototype.fixExtension=function(){return(this+"").replace(/.gif$/gi,".png").replace(/.tif+$/gi,".jpg")},String.prototype.getDir=function(){var t=(this+"").split("#")[0];return t.substring(0,t.lastIndexOf("/")+1)},String.prototype.getFile=function(){var t=(this+"").split("#")[0];return t.substring(t.lastIndexOf("/")+1)},String.prototype.getRelpath=function(t){var n=this+"",e=n.lastIndexOf("#");for(-1===e?e=n.length-1:e--;e>=0&&("/"!==n[e]||0!==t--);e--);return n.substring(e+1)},String.prototype.fixUrl=function(){for(var t,n,e=this+"";(t=e.indexOf("../"))>0;){if(1===t||-1===(n=e.lastIndexOf("/",t-2)))return e.substring(t+3);e=e.substring(0,n)+e.substring(t+2)}return e},String.prototype.fullUrl=function(){var t=this+"";return t.match(/^(http|ftp|file)/)||(t=window.location.href.getDir()+t),t.fixUrl()},String.prototype.cleanupHTML=function(){for(var t=[[/<br>/gi,"\n"],[/\&amp;/gi,"&"],[/\&lt;/gi,"<"],[/\&gt;/gi,">"],[/\&(m|n)dash;/gi,"-"],[/\&apos;/gi,"'"],[/\&quot;/gi,'"']],n=this+"",e=t.length-1;e>=0;e--)n=n.replace(t[e][0],t[e][1]);return n},String.prototype.stripHTML=function(t){var n=this+"";return t&&(n=n.cleanupHTML()),n.replace(/<\/?[^>]+>/gi,"")},String.prototype.stripQuote=function(){return(this+"").replace(/\"/gi,"&quot;")},String.prototype.appendSep=function(t,n){return(this.length?this+(n||" &middot; "):"")+t},String.prototype.rgb2hex=function(){var t=this+"";if("#"===t.charAt(0)||"transparent"===t)return t;var n,e=t.match(/\d+/g),r="";if(e){for(var i=0;i<e.length&&3>i;++i)n=parseInt(e[i],10).toString(16),r+=(n.length<2?"0":"")+n;return"#"+r}return"transparent"},String.prototype.template=function(t){if("undefined"==typeof t||!this)return this;!isNaN(parseFloat(t))&&isFinite(t)&&(t+="");var n=this+"";if(t.constructor===Array)for(var e=0;e<t.length;++e)n=n.replace(new RegExp("\\{"+e+"\\}","gi"),t[e]);else n=n.replace(/\{0\}/gi,t);return n},String.prototype.getSearchTerms=function(){var t=this+"";if(-1===t.indexOf('"'))return t.split(" ");var n,e=[];do{if((n=t.indexOf('"'))>0&&e.push.apply(e,t.substring(0,n).split(" ")),t=t.substring(n+1),n=t.indexOf('"'),0>n){e.push(t);break}e.push(t.substring(0,n)),t=t.substring(n+1)}while(t.length);return e},String.prototype.objectify=function(){if(!this||!this.length)return this;var t=this+"";("?"===t.charAt(0)||"#"===t.charAt(0))&&(t=t.substring(1));for(var n,e={},r=t.split("&"),i=0,o=r.length;o>i;++i)n=r[i].split("="),n.length>1&&(e[n[0]]=decodeURIComponent(n[1]));return e},String.prototype.testIn=function(t){return"string"!=typeof t&&(t+=""),new RegExp(this,"i").test(t)},String.prototype.testExactMatch=function(t){if(t.constructor!==Array)return this==t+"";for(var n=0,e=t.length;e>n;++n)if(this==t[n])return!0;return!1},String.prototype.fixjAlbumPaths=function(t,n,e){var r=(this+"").replace(/\%24/g,"$");return t&&(r=r.replace(/\${resPath}/g,t)),n&&(r=r.replace(/\${rootPath}/g,n)),e&&(r=r.replace(/\${relPath}/g,e)),r},String.prototype.testMatch=function(t){var n=this.toLowerCase();if(t.constructor!==Array)return n==(t+"").toLowerCase();for(var e=0,r=t.length;r>e;++e)if(n==t[e].toLowerCase())return!0;return!1},String.prototype.hashCode=function(){for(var t=0,n=0,e=this.length;e>n;++n)t=(t<<5)-t+this.charCodeAt(n),t&=t;return t},Math.minMax=function(t,n,e){return n=isNaN(n)?parseFloat(n):n,t>n?t:n>e?e:n};var isEmpty=function(t){return null==t?!0:0===Object.getOwnPropertyNames(t).length},paramize=function(t){if("number"==typeof t)return""+t;if("string"==typeof t)return t;if("object"==typeof t){for(var n="",e=Object.getOwnPropertyNames(t),r=e.length,i=0;r>i;i++)null!==t[e[i]]&&(n+="&"+e[i]+"="+encodeURIComponent(t[e[i]]));if(n.length)return n.substring(1)}return""},allTrue=function(t){if(t&&t.constructor===Array){for(var n=0;n<t.length;++n)if(!t[n])return!1;return!0}return t===!0},getCoords=function(t){return t.touches?1==t.touches.length?{x:t.touches[0].clientX,y:t.touches[0].clientY}:t.changedTouches&&1==t.changedTouches.length?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:null:{x:t.clientX,y:t.clientY}},translate=function(t,n){if(t=t.trim(),"undefined"!=typeof Texts&&Texts.hasOwnProperty(t))return Texts[t];if("undefined"!=typeof n)return DEBUG&&console&&console.log("Using default translation: "+t+"="+n),n;DEBUG&&console&&console.log("Missing translation: "+t);var e=t.replace(/([A-Z])/g," $1").toLowerCase();return e[0]=e.charAt(0).toUpperCase(),e},getKeys=function(t,n){var e,r={},i=t.split(","),o=i.length;for(e=0;o>e;e++)r[i[e]]=translate(i[e],n[i]);return r},getTranslations=function(t){var n,e={};for(n in t)e[n]="object"==typeof t[n]?getTranslations(t[n]):translate(n,t[n]);return e},readData=function(t,n){var e={};if(t&&t.length&&n){n=n.split(",");for(var r,i=0;i<n.length;i++)null!=(r=t.data(n[i]))&&(e[n[i]]=r)}return e},getRelativeDate=function(t){if(!t)return translate("today");if(1===t)return translate("yesterday");var n,e;return t>=730?(n=translate("yearsAgo"),e=Math.round(t/365)):t>=60?(n=translate("monthsAgo"),e=Math.round(t/30.5)):(n=translate("daysAgo"),e=t),n.replace("{0}",e)},getTimespan=function(t){if(!t)return translate("today");if(1===t)return translate("yesterday");var n,e;return t>=730?(n=translate("inThePastNYears"),e=Math.round(t/365)):t>=60?(n=translate("inThePastNMonths"),e=Math.round(t/30.42)):(n=translate("inThePastNDays"),e=t),n.replace("{0}",e)},getRelativePath=function(t,n){if(!n.length)return"";if(!t.length)return n.endsWith("/")?n:n+"/";if(t===n)return"";for(var e=t.split("/"),r=n.split("/");e.length&&r.length&&e[0]===r[0];)e.shift(),r.shift();return"../../../../../../../../../../../../../../../../../../../../".substring(0,3*(e.length-1))+(r.length?r.join("/")+"/":"")},extend=function(){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(arguments[0][n]=arguments[t][n]);return arguments[0]},passDefaults=function(t,n,e){if("undefined"!=typeof e&&t&&n){e=e.split(",");for(var r=0;r<e.length;r++)t.hasOwnProperty(e[r])&&(n[e[r]]=t[e[r]])}},readUserPrefs=function(t,n){if("undefined"!=typeof n&&t){n=n.split(",");for(var e,r=0;r<n.length;r++)null!==(e=$.cookie(n[r]))&&(t[n[r]]=e)}},addParam=function(t,n,e){if(HISTORY){var r=window.location.hash;r&&("#"===r.charAt(0)&&(r=r.substring(1)),n=extend(history.state||r.objectify(),n)),r="#"+paramize(n),r!==window.location.hash&&history.pushState(n,"undefined"==typeof e?"":e,r.length>1?r:t||"index.html")}},setParam=function(t,n,e){if(HISTORY){var r="#"+paramize(n);r!==window.location.hash&&history.pushState(n,"undefined"==typeof e?"":e,r.length>1?r:t||"index.html")}},removeParam=function(t,n,e){if(HISTORY){var r,i=window.location.hash;i&&("undefined"==typeof n?(i="",history.pushState("","",t||"index.html")):("#"===i.charAt(0)&&(i=i.substring(1)),r=history.state||i.objectify(),r.hasOwnProperty(n)&&(delete r[n],i="#"+paramize(r)),history.pushState(r,"undefined"==typeof e?"":e,i.length>1?i:t||"index.html")))}},removeSearch=function(t){HISTORY&&history.replaceState(history.state,"undefined"==typeof t?"":t,window.location.href.replace(window.location.search,""))},readParam=function(){if(HISTORY){if(history.state)return history.state;var t=window.location.hash;return"#"===t.charAt(0)&&(t=t.substring(1)),t.objectify()}return null},printImage=function(t,n,e){if(t){var r=window.open("about:blank","print","location=no,status=no,titlebar=no");r.document.open(),r.document.write('<!DOCTYPE html>\n<html>\n<head>\n<meta charset="utf-8">\n<title>'+(n||"Print")+'</title>\n<script>printOut=function(){window.print();window.close();}</script>\n<style>body{margin:0;padding:0;text-align:center;overflow:hidden;}\nimg{display:block;width:100%;height:auto;vertical-align:top;}</style>\n</head>\n<body onLoad="setTimeout(printOut,100)"><img src="'+t+'">'+(e||"")+"</body>\n</html>"),r.document.close()}},xDecrypt=function(t){var n,e,r,i=[147,163,87,254,153,4,198,23],o=t.length,a=5*Math.ceil(o/8),s=new Array(a),u="",l=0;for(n=0;a>n;n++)s[n]=0;for(n=0;o>n;n++)(r=t.charCodeAt(n)-48)>9&&(r-=7),r<<=11-l%8,e=Math.floor(l/8),a>e&&(s[e]|=r>>8,++e<a&&(s[e]|=255&r)),l+=5;for(n=0;a>n;n++)s[n]^=i[n%8];for(a=s[0]|s[1]<<8,r=0,n=4;a>n;n++)u+=String.fromCharCode(s[n]),r+=s[n];return r!=(255&s[2]|s[3]<<8)&&(u=""),u},scrollbarWidth=function(){var t=document.createElement("div");t.style.cssText="width:100px;height:100px;overflow:scroll !important;position:absolute;top:-9999px",document.body.appendChild(t);var n=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),n},isTouchEnabled=function(){return/Trident/.test(navigator.userAgent)?"undefined"!=typeof navigator.maxTouchPoints&&navigator.maxTouchPoints:/Edge/.test(navigator.userAgent)?0==scrollbarWidth():/(Chrome|CriOS)/.test(navigator.userAgent)?/Mobile/.test(navigator.userAgent)||"ontouchstart"in window:"ontouchstart"in window},getTouch=function(){return/Trident|Edge/.test(navigator.userAgent)?window.navigator.pointerEnabled?{START:"pointerdown",MOVE:"pointermove",END:"pointerup",CANCEL:"pointercancel"}:{START:"MSPointerDown",MOVE:"MSPointerMove",END:"MSPointerUp",CANCEL:"MSPointerCancel"}:{START:"touchstart",MOVE:"touchmove",END:"touchend",CANCEL:"touchcancel"}},hasLocalStorage=function(){try{return localStorage.setItem("_t","undefined"),localStorage.removeItem("_t"),!0}catch(t){return!1}},hasHistory=function(){var t=navigator.userAgent;return-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone")?window.history&&"pushState"in window.history:!1},addClass=function(t,n){t.classList?t.classList.add(n):t.className+=" "+n},getVendor=function(){var t=navigator.userAgent;return t.indexOf("Trident")>0?"ms":t.indexOf("AppleWebKit")>0?"webkit":t.indexOf("Gecko")>0?"moz":t.indexOf("Presto")>0?"o":t.indexOf("Blink")>0?"webkit":""},UNDEF="undefined",NOLINK="javascript:void(0)",LOCAL=0===location.protocol.indexOf("file:"),LOCALSTORAGE=hasLocalStorage(),HISTORY=hasHistory(),VEND=getVendor(),TOUCH=getTouch(),TOUCHENABLED=isTouchEnabled();addClass(document.getElementsByTagName("html")[0],(TOUCHENABLED?"":"no-")+"touch");var log=function(){},DEBUG="undefined"==typeof DEBUG?!1:DEBUG;!function(t,n){var e,r,i=!1,o=1;log=function(n){var a=function(n){if(t.isArray(n)){for(var e="",r=0;r<n.length;r++)e+=a(n[r])+", ";return"[ "+e.substring(0,e.length-2)+" ]"}if("object"==typeof n){var e="";for(var r in n)e+=r+": "+a(n[r])+",<br>";return"{ "+e+" }"}return isNaN(n)?n:parseInt(n)===n?n:n.toFixed(4)};DEBUG&&!i&&(e||(e=t('<div id="log" style="position:fixed;left:0;top:0;width:200px;bottom:0;overflow:auto;padding:10px;background-color:rgba(0,0,0,0.5);color:#fff;font-size:0.75em;z-index:999999"></div>').hover(function(){i=!0},function(){i=!1}).appendTo("body")),n===r?e.children(":first").empty().html(r+" <sup>("+ ++o+")</sup>"):(t('<div style="height:3em;overflow:auto;">'+a(n)+"</div>").prependTo(e),r=n,o=1))},t.fn.logEvents=function(n){if(DEBUG){var e=n||"mousedown mouseup mouseover mouseout mousewheel wheel dragstart click blur focus load unload reset submit change abort cut copy paste selection drag drop orientationchange touchstart touchmove touchend touchcancel pointerdown pointermove pointerup MSPointerDown MSPointerMove MSPointerUp gesturestart gesturechange gestureend";return this.each(function(){t(this).on(e,function(t){return"undefined"==typeof t?log("Undefined event"):t.target?"log"!==t.target.id&&log(t.type+' <span style="padding:0 4px;font-size:0.75em;background-color:#000;border-radius:4px;"><b>'+(t.target.nodeName?t.target.nodeName.toLowerCase():"???")+"</b>"+(t.target.id?":"+t.target.id:"")+"</span>"+(t.relatedTarget?' <span style="padding:0 4px;font-size:0.6em;background-color:#800;border-radius:4px;"><b>'+t.relatedTarget.nodeName.toLowerCase()+"</b>"+(t.relatedTarget.id?":"+t.relatedTarget.id:"")+"</span>":"")):log("No event target!"),!0})})}},t.fn.logCss=function(n,e,r){if(DEBUG){r=r||20,e=e||2e3;var i=new Date;return this.each(function(){var o=t(this),a=function(t){var n=new Date-i;log(n+"&nbsp;::&nbsp;"+t+" = "+o.css(t)),n>e&&clearInterval(s)},s=setInterval(function(){if(t.isArray(n))for(var e=0;e<n.length;e++)a(n[e]);else a(n)},r)})}},t.when.all===n&&(t.when.all=function(n){var e=new t.Deferred;return t.when.apply(t,n).then(function(){e.resolve(Array.prototype.slice.call(arguments))},function(){e.fail(Array.prototype.slice.call(arguments))}),e}),t.fn.waitAllImg=function(n,e,r){var i=t(this),o=[],a=function(n){var e=new t.Deferred,r=new Image;return r.onload=function(){e.resolve(n)},r.onerror=function(){e.reject(new Error("Image not found: "+n.src))},r.src=n.src,e},s=function(n){return n.filter('img[src][src!=""]').each(function(){o.push(a(this))}),t.when.all(o)};return s(i).then(function(n){t.isFunction(e)&&e.call(n)},function(n){t.isFunction(r)&&r.call(n)}).then(function(){t.isFunction(n)&&n.call(i)}),this}}(jQuery);
var J={FOLDERS:"folders",NAME:"name",PATH:"path",THUMB:"thumb",IMAGE:"image",WIDTH:"width",HEIGHT:"height",ORIGINAL:"original",FOLDERS:"folders",OBJECTS:"objects",FILEDATE:"fileDate",COMMENT:"comment",TITLE:"title",COUNTERS:"counters",DEEPCOUNTERS:"deepCounters",FILESIZE:"fileSize",CATEGORY:"category",KEYWORDS:"keywords",CAMERA:"camera",VIDEO:"video",LEVEL:"level",PATHREF:"pathRef",PARENTREF:"parentRef",RELPATH:"relPath",READY:"ready",SELECTED:"selected",ACTIVE:"active",IMAGECAPTION:"imageCaption",THUMBCAPTION:"thumbCaption",PHOTODATA:"photodata",LOCATION:"location",SHOP:"shop",MODIFIEDDAYS:"modifiedDays",MOSTPHOTOS:"mostphotos",OBJ:"obj"},Album=function(e){var t,n,r,o,a,i={treeFile:"tree.json",dataFile:"data1.json",indexName:"index.html",slidesDir:"slides",rootPath:"",relPath:"",lazy:!0},l=getTranslations({and:"and"}),u={},s=[],f=function(e){if("video"===e[J.CATEGORY]){var t=e[J.VIDEO][J.PATH];return t.substring(t.lastIndexOf("/")+1)}return e.hasOwnProperty(J.ORIGINAL)?e[J.ORIGINAL][J.PATH]:e[J.NAME]},h=function(t){var n=e.inArray(t,s);return n>=0?n:s.push(t)-1},E=function(e){return s[e]},c=function(t){if(!t)return u;if(e.isNumeric(t)){if(t>s.length)return console.log("Error: out of bounds path reference!"),null;t=s[t]}"/"===t[t.length-1]&&(t=t.substring(0,t.length-1));var n,r,o,a,i=u,l=t.split("/");for(n=0,o=l.length;n<o;n++){if(!i.hasOwnProperty(J.FOLDERS))return null;for(r=0,a=i[J.FOLDERS].length;r<a;r++)if(i[J.FOLDERS][r][J.PATH]===l[n]){i=i[J.FOLDERS][r];break}if(r===a)return null}return n===o?i:null},O=function(t,n){if(t){if(t.hasOwnProperty(J.OBJECTS))return e.isFunction(n)&&n.call(this,t[J.OBJECTS]),!0;var r=E(t[J.RELPATH]);o||(o=[]),o.push(e.getJSON((r?r+"/":"")+i.dataFile+(i.makeDate?"?lm="+i.makeDate:"")).done(function(r){if(r.hasOwnProperty(J.OBJECTS)){t[J.OBJECTS]=r[J.OBJECTS];for(var o=0,a=t[J.OBJECTS].length;o<a;o++)t[J.OBJECTS][o][J.PATHREF]=t[J.PATHREF],t[J.OBJECTS][o][J.RELPATH]=t[J.RELPATH],"folder"===t[J.CATEGORY]&&(t[J.OBJECTS][o][J.PARENTREF]=t[J.PARENTREF])}e.isFunction(n)&&n.call(this,t[J.OBJECTS])}).fail(function(){console.log('Error loading folder data: "'+(r?r+"/":"")+i.dataFile+'".'),e.isFunction(n)&&n.call(this,t[J.OBJECTS])}))}else console.log('Error: loadData("null")!')},d=function(e,t){if(O(e),t&&e.hasOwnProperty(J.FOLDERS))for(var n=0,r=e[J.FOLDERS].length;n<r;n++)d(e[J.FOLDERS][n])};return{init:function(l){if(!t)return t=new Date,e.extend(i,l),a=!1,"."===i.rootPath&&(i.rootPath=""),function(t){e.getJSON((i.rootPath?i.rootPath+"/":"")+i.treeFile+(i.makeDate?"?lm="+i.makeDate:"")).done(function(r){u=r,null===(n=c(i.relPath))&&(console.log("Error: can't find folder \""+i.relPath+'" in the database! Reverting to root folder.'),n=""),function(){var e=function(t,r,o){t[J.LEVEL]=r,o.length&&(o+="/");var a=r?t[J.PATH]:"";t[J.PATHREF]=h(o+a),t[J.PARENTREF]=r?h(o):null;var l;if(l=i.relPath.length?t===n?"":0===a.indexOf(i.relPath)?a.substring(i.relPath.length):i.rootPath+"/"+(o+a):o+a,t[J.RELPATH]=h(l),t.hasOwnProperty(J.FOLDERS)){pr=h(o);for(var u=0,s=t[J.FOLDERS].length;u<s;u++)e(t[J.FOLDERS][u],r+1,o+a)}};e(u,0,"")}(),e.isFunction(t)&&t.call(this)}).fail(function(){console.log('Error loading "'+i.treeFile+"\". Please note, JSON support is required for this album, but it's blocked in Chrome and IE when viewing local albums. The uploaded album will work fine, however."),e.isFunction(t)&&t.call(this)})}(function(){o=[],d(i.lazy?n:u,!i.lazy),e.when.apply(e,o).done(function(){var l=new Date;console.log(o.length+" folder(s) loaded: "+(l-t)+"ms"),a=!0,o=null,r=n&&n.hasOwnProperty(J.OBJECTS)?0:null,e.isFunction(i.ready)&&i.ready.call(this)})}),t},getTree:function(){return u},getMakeDate:function(){return new Date(u[J.FILEDATE])},getAlbumTitle:function(){return u[J.TITLE]||u[J.NAME]},getPaths:function(){return s},getCurrentFolder:function(){return n},getObjects:function(){return n.hasOwnProperty(J.OBJECTS)?n[J.OBJECTS]:[]},getImages:function(){var e=[];if(n&&n.hasOwnProperty(J.OBJECTS))for(var t=n[J.OBJECTS],r=0,o=t.length;r<o;r++)"image.audio.video.other".indexOf(t[r][J.CATEGORY])>=0&&e.push(t[r]);return e},collectTags:function(t){var t=e.extend({fields:"creator,keywords",types:"folder,page,image",depth:"current"},t),r=[],a=e.isArray(t.fields)?t.fields:t.fields.split(","),i=a.length,l=(e.isArray(t.types)?t.types:t.types.split(","),"name"===t.sort),s=(t.depth,function(e){for(var t,n=e.toString().split(","),o=0,a=n.length;o<a;o++)if((t=n[o].toString().trim()).length){for(var i=0,l=r.length;i<l&&r[i][0]!==t;i++);i===l?r.push([t,1]):r[i][1]++}}),f=function(e){if(e&&e.length){var t,n,r,o=e.length;for(t=0;t<o;t++)for(n=e[t],r=0;r<i;r++)n.hasOwnProperty(a[r])&&s(n[a[r]])}},h=function(e){if(O(e,f),"current"!==t.depth&&e.hasOwnProperty(J.FOLDERS))for(var n=0,r=e[J.FOLDERS].length;n<r;n++)h(e[J.FOLDERS][n])},E=function(){r.sort(function(e,t){return l?(""+e[0]).localeCompare(""+t[0]):t[1]-e[1]})};o=[],h("tree"===t.depth?u:n),e.isFunction(t.ready)&&(o.length?e.when.apply(e,o).done(function(){t.sort&&E(),t.ready.call(r,t)}):(t.sort&&E(),t.ready.call(r,t)))},collectItems:function(t){if(typeof t!==UNDEF&&t.hasOwnProperty("terms")){var r,a,i=[],s=(t=e.extend({fields:"creator,keywords,title,comment",depth:"current",exact:!1},t)).fields.split(","),f=s.length,h=!1,E=(t.depth,function(e){if(e&&e.length){var n,o,l,u,E=e.length;for(n=0;n<E;n++)"webPage"!==(o=e[n])[J.CATEGORY]&&"folder"!==o[J.CATEGORY]&&function(){var e=h?new Array(a):null;for(l=0;l<f;l++)if(o.hasOwnProperty(s[l]))for(u=0;u<a;u++)if(r[u]&&(t.exact&&r[u].testMatch(o[s[l]])||r[u].testIn(o[s[l]]))){if(!h)return void i.push(o);e[u]=!0}h&&allTrue(e)&&i.push(o)}()}}),c=function(e){if(O(e,E),"current"!==t.depth&&e.hasOwnProperty(J.FOLDERS))for(var n=0,r=e[J.FOLDERS].length;n<r;n++)c(e[J.FOLDERS][n])};'"'===t.terms[0]&&'"'===t.terms[t.terms.length-1]?(r=t.terms.substring(1,t.terms.length-1),t.exact=!0):r=t.terms.replace(/\s+/g,","),~r.indexOf(","+l.and+",")&&(r=r.replace(new RegExp(","+l.and+",","gi"),","),h=!0),r=r.split(","),a=r.length,o=[],c("tree"===t.depth?u:n),e.isFunction(t.ready)&&(o.length?e.when.apply(e,o).done(function(){t.ready.call(i,t)}):t.ready.call(i,t))}},collectByDate:function(t){if(typeof t!==UNDEF&&t.hasOwnProperty("range")){var r,a,i=[],l=((t=e.extend({sort:!0,depth:"current"},t)).depth,function(e){if(e&&e.length){var t,n,o=e.length;for(t=0;t<o;t++)"webPage"!==(n=e[t])[J.CATEGORY]&&"folder"!==n[J.CATEGORY]&&n.hasOwnProperty(J.MODIFIEDDAYS)&&n[J.MODIFIEDDAYS]>=r&&n[J.MODIFIEDDAYS]<=a&&i.push(n)}}),s=function(){i.sort(function(e,t){return t[J.MODIFIEDDAYS]-e[J.MODIFIEDDAYS]})},f=function(e){if(O(e,l),"current"!==t.depth&&e.hasOwnProperty(J.FOLDERS))for(var n=0,r=e[J.FOLDERS].length;n<r;n++)f(e[J.FOLDERS][n])};t.end?(a=t.end,r=a-t.range):(r=Math.ceil(new Date/864e5),r-=t.hasOwnProperty("start")?t.start:t.range,a=r+t.range),o=[],f("tree"===t.depth?u:n),e.isFunction(t.ready)&&(o.length?e.when.apply(e,o).done(function(){t.sort&&s(),t.ready.call(i,t)}):(t.sort&&s(),t.ready.call(i,t)))}},getFolderPath:function(e){return E(e[J.PATHREF]||0)},getRelativeFolderPath:function(e){return E(e[J.RELPATH]||0)},getParent:function(e){if(e===u)return null;var t;return(t=e.hasOwnProperty(J.PARENTREF)?null===e[J.PARENTREF]?null:c(e[J.PARENTREF]):c(e[J.PATHREF]))===e?null:t},getItemName:f,getItemPath:function(e){var t=E(e[J.RELPATH]),n=e[J.CATEGORY]||"image";return t=t.length?t+"/":"","video"===n?t+e[J.VIDEO][J.PATH]:"audio"===n||"other"===n||e.hasOwnProperty(J.ORIGINAL)?t+e[J.ORIGINAL][J.PATH]:t+e[J.IMAGE][J.PATH]},getThumbPath:function(e){var t=E(e[J.RELPATH]);return(t.length?t+"/":"")+e[J.THUMB][J.PATH]},getImagePath:function(e){var t=E(e[J.RELPATH]);return(t=t.length?t+"/":"")+e[J.IMAGE][J.PATH]},getSourcePath:function(e){var t=E(e[J.RELPATH]);return(t.length?t+"/":"")+(e.hasOwnProperty(J.ORIGINAL)?e[J.ORIGINAL][J.PATH]:e[J.IMAGE][J.PATH])},getAbsolutePath:function(e){var t=E(e[J.RELPATH]);return(t.length?t.fullUrl():window.location.href.getDir())+(window.location.href.getFile()||i.indexName)+"#img="+f(e)},getAbsoluteImagePath:function(e){var t=E(e[J.RELPATH]);return(t.length?t.fullUrl():window.location.href.getDir())+e[J.IMAGE][J.PATH]},isImage:function(e){return e.hasOwnProperty(J.CATEGORY)&&"image"===e[J.CATEGORY]},isAudio:function(e){return e.hasOwnProperty(J.CATEGORY)&&"audio"===e[J.CATEGORY]},isVideo:function(e){return e.hasOwnProperty(J.CATEGORY)&&"video"===e[J.CATEGORY]},isCurrentFolder:function(e){return 0===e[J.RELPATH]},getTitle:function(e){return e[J.TITLE]||""},getName:function(e){return e[J.NAME]||""},getComment:function(e){return e[J.COMMENT]||""},getProperty:function(e,t,n){return e.hasOwnProperty(t)?e[t]:n?function(e,t){do{if(e.hasOwnProperty(t))return e[t]}while(e=Album.getParent(e));return null}(e,t):null},getRootProperty:function(e){return u.hasOwnProperty(e)?u[e]:null},getParsedProperty:function(e,t,n){return n?function(e,t){var n={};do{e.hasOwnProperty(t)&&(n=extend(JSON.parse(e[t]),n))}while(e=Album.getParent(e));return n}(e,t):e.hasOwnProperty(t)?JSON.parse(e[t]):null},getParsedRootProperty:function(e){return u.hasOwnProperty(e)?JSON.parse(u[e]):null}}}(jQuery);
!function(e){"use strict";var t=function(){try{return localStorage.setItem("_t",VER),localStorage.removeItem("_t"),!0}catch(e){return!1}}();e.cookie=function(r,n,o){var i,a,l="; ",s=function(e){return/^(true|yes)$/.test(e)?!0:/^(false|no)$/.test(e)?!1:/^([\d.]+)$/.test(e)?parseFloat(e):e};if(arguments.length>1)return a=new Date,null===n?t?localStorage.removeItem(r):document.cookie=encodeURIComponent(r)+"=; expires="+a.toGMTString()+"; path=/":/^(string|number|boolean)$/.test(typeof n)&&(a.setTime(a.getTime()+1e3*("number"!=typeof o?3600:o)),t?localStorage.setItem(r,String(n)+l+String(a.getTime())):document.cookie=encodeURIComponent(r)+"="+String(n)+"; expires="+a.toGMTString()+"; path=/"),n;if(r)if(t){if(i=localStorage.getItem(r)){if(i=i.split(l),!(e.isArray(i)&&i.length>1))return s(i);if(a=new Date,a.getTime()<parseInt(i[1],10))return s(i[0]);localStorage.removeItem(r)}}else{var u;i=document.cookie.split(";"),r+="=";for(var c=0;c<i.length;c++)u=i[c].trim(),0===u.indexOf(r)&&(u=u.substring(r.length),s(u))}return null}}(jQuery);
!function(n){"use strict";n.fn.scrollToTopBtn=function(){var o=n("<a>",{"class":"large button icon-arrow-up",id:"scrollup",role:"button"}).appendTo(n(this).eq(0));return n(window).on("scroll",function(){return n(window).scrollTop()>0?o.is(":hidden")&&o.fadeIn(500):o.fadeOut(500),!0}),o.on("click",function(){return n("body, html").animate({scrollTop:0},500),!1}),this}}(jQuery);
!function(e){"use strict";e.fn.renderShares=function(t){t=e.extend({className:"shares",sites:"facebook,twitter,googlePlus,tumblr"},t);var a=e(this),i="facebook,twitter,googlePlus,tumblr,pinterest,linkedin,digg,stumbleupon,reddit,email",n=t.sites.split(","),r=getTranslations({share:"Share",shareOn:"Share on",checkThisOut:"Found this page",localWarning:"Can't share local albums. Please upload your album first!"}),o=encodeURIComponent(t.callAction||r.checkThisOut),s=(t.label||r.share,function(a,i){i="undefined"!=typeof i?e.extend(t,i):t,i.hasOwnProperty("description")&&(i.description=i.description.stripHTML()),i.hasOwnProperty("title")&&(i.title=i.title.stripHTML());var n,r=i.href||window.location.href,s=encodeURIComponent(r),l=encodeURIComponent(i.title||e("meta[name=title]").attr("content")||e("title").text()||""),p=encodeURIComponent(i.description||e("meta[name=description]").attr("content")||""),u=i.image||e("link[rel=image_src]").attr("href")||"",d=encodeURIComponent(u);u.startsWith("http")||(u=r.fullUrl()+u,d=encodeURIComponent(u)),c.find("a").each(function(){var t=e(this);switch(t.data("share")){case"facebook":if("undefined"!=typeof FB)return void t.off("click.share").on("click.share",function(){return FB.ui({method:"feed",link:r,caption:i.title||e("meta[name=title]").attr("content")||e("title").text()||"",description:i.description||e("meta[name=description]").attr("content")||"",picture:u}),!1});n="http://www.facebook.com/sharer.php?s=100&p%5Burl%5D="+s+"&p%5Bimages%5D%5B0%5D="+u+"&p%5Btitle%5D="+l;break;case"twitter":n="http://twitter.com/home?status="+l+": "+s;break;case"googlePlus":n="https://plus.google.com/share?url="+s;break;case"tumblr":n="http://www.tumblr.com/share/link?url="+s+"&name="+l;break;case"pinterest":n="http://pinterest.com/pin/create/button/?url="+s+"&media="+d+"&description="+l;break;case"linkedin":n="https://www.linkedin.com/shareArticle?mini=true&url="+s+"&title="+l+"&summary="+p;break;case"digg":n="http://digg.com/submit?url="+r;break;case"stumbleupon":n="http://www.stumbleupon.com/submit?url="+r+"&title="+l;break;case"reddit":n="http://www.reddit.com/submit?url="+r;break;case"email":t.attr({href:"mailto:?subject="+o+"&body="+l+"%0D%0A"+p+"%0D%0A"+r.replace(/%/g,"%25")});default:return}t.attr({href:n,target:"_blank"})})}),l=function(){var t,a,o;for(o=0;o<n.length;o++)a=n[o],i.indexOf(a)>=0&&(t=e("<a>",{"class":"icon-"+a.unCamelCase(),title:r.shareOn+" "+a.capitalize()}).data("share",a).appendTo(c));s()},c=e("<div>",{"class":t.className});return a.append(c),l(),a.on("updateLinks",s),c.children("a").addTooltip(),this}}(jQuery);
!function(t,o,i,n){"use strict";var e,s,a=function(){var t=(i.body||i.documentElement).style;if(t.webkitTransition!==n)e="-webkit-",s="webkitTransitionEnd";else if(t.MozTransition!==n)e="-moz-",s="transitionend";else if(t.OTransition!==n)e="-o-",s="oTransitionEnd";else{if(t.transition===n)return!1;e="",s="transitionend"}return!0},r="ease-out",f=a(),c={left:0,top:0,center:.5,middle:.5,right:1,bottom:1};t.fn.translateX=function(o,i,a){var r={};if("undefined"==typeof o){var c=t(this).eq(0);return f?c.position().left-parseFloat(c.css("left")):c.position().left-c.data("leftPos")||0}return f&&(r[e+"transform"]="translateX("+o+"px)",r[e+"transition"]=e+"transform"+(i?" "+i+"ms ease-out":"")),this.each(function(){var e=t(this);if(f)"function"==typeof a&&e.one(s,a),e.css(r);else{var c=e.data("leftPos");c===n&&e.data("leftPos",c=e.position().left),r.left=c+o,i?e.animate(r,i,a):("function"==typeof a&&setTimeout(function(){a.call(e[0])},50),e.css(r))}})},t.fn.translate=function(o,i,a){var r={};if("undefined"==typeof o){var c=t(this).eq(0);return f?[c.position().left-parseFloat(c.css("left")),c.position().top-parseFloat(c.css("top"))]:[c.position().left-c.data("leftPos")||0,c.position().top-c.data("topPos")||0]}return f&&(r[e+"transform"]="translate("+o[0]+"px,"+o[1]+"px)",r[e+"transition"]=e+"transform"+(i?" "+i+"ms ease-out":"")),this.each(function(){var e=t(this);if(f)"function"==typeof a&&e.one(s,a),e.css(r);else{var c=e.data("leftPos");top=e.data("topPos"),c===n&&e.data("leftPos",c=e.position().left),top===n&&e.data("topPos",top=e.position().top),r.left=c+o[0],r.top=top+o[1],i?e.animate(r,i,a):("function"==typeof a&&setTimeout(function(){a.call(e[0])},50),e.css(r))}})},t.fn.translateXAndFade=function(o,i,a,r){var c={opacity:i};return f&&(c[e+"transform"]="translateX("+o+"px)",c[e+"transition-property"]=e+"transform, opacity",c[e+"transition-duration"]=a+"ms",c[e+"transition-timing-function"]="ease-out"),this.each(function(){var i=t(this);if(f)"function"==typeof r&&i.one(s,r),i.css(c);else{var e=i.data("leftPos");e===n&&i.data("leftPos",e=i.position().left),c.left=e+o,a?i.animate(c,a,r):(i.css(c),"function"==typeof r&&setTimeout(function(){r.call(i[0])},50))}})},t.fn.translateAndFade=function(o,i,a,r){var c={opacity:i};return f&&(c[e+"transform"]="translate("+o[0]+"px,"+o[1]+"px)",c[e+"transition-property"]=e+"transform, opacity",c[e+"transition-duration"]=a+"ms",c[e+"transition-timing-function"]="ease-out"),this.each(function(){var i=t(this);if(f)"function"==typeof r&&i.one(s,r),i.css(c);else{var e=i.data("leftPos"),p=i.data("topPos");e===n&&i.data("leftPos",e=i.position().left),p===n&&i.data("topPos",p=i.position().top),c.left=e+o[0],c.top=p+o[1],a?i.animate(c,a,r):(i.css(c),"function"==typeof r&&setTimeout(function(){r.call(i[0])},50))}})},t.fn.opacity=function(o,i,a,c,p){var l=t(this);if(o===n||"boolean"==typeof o)return l.css("opacity");var u=!1,m={},y=function(){u||(u=!0,t.isFunction(p)&&p.call(l[0]))};return t.isFunction(i)?(p=i,a=r,i=n):t.isFunction(a)?(p=a,a=r):t.isFunction(c)&&(p=c,c=!1),"boolean"==typeof a&&(c=a,a=r),"boolean"==typeof i&&(c=i,i=n),l.css("opacity")===o?(t.isFunction(p)&&setTimeout(function(){p.call(l[0])},50),this):(m.opacity=o,f&&!c?i?(m[e+"transition"]="opacity "+i+"ms "+a,l.one(s,y),setTimeout(y,i+50),l.css(m)):(m[e+"transition"]="none",l.css(m),t.isFunction(p)&&setTimeout(function(){p.call(l[0])},50)):i?l.animate(m,i,y):(l.css(m),t.isFunction(p)&&setTimeout(function(){p.call(l[0])},50)),this)},t.fn.transform=function(o,i,a,p,l){var u=t(this).eq(0),m=u.data("transform")||{origo:[0,0],position:[0,0],origin:[.5,.5],baseSize:[u.width(),u.height()],baseScale:[1,1],scale:[1,1],rotate:0};if("object"!=typeof o)return m;arguments.length>1?("function"==typeof i?(l=i,a=r,i=n):"function"==typeof a?(l=a,a=r):"function"==typeof p&&(l=p,p=!1),"boolean"==typeof a&&(p=a,a=r),"boolean"==typeof i&&(p=i,i=n)):a=r;var y,d=!1,g={},b=function(){setTimeout(function(){d||(d=!0,"function"==typeof l&&l.call(u[0]))},20)};if(o.opacity!==n&&(g.opacity=o.opacity),o.origo){if(!f||p){var h=u.data("originalPosition");h||(h=[u.position().left,u.position().top],u.data("originalPosition",h)),o.origo[0]+=h[0],o.origo[1]+=h[1]}}else o.origo=m.origo;return o.baseScale?"number"==typeof o.baseScale&&(o.baseScale=[o.baseScale,o.baseScale]):o.baseScale=m.baseScale,o.baseSize?o.scale||o.size||(o.scale=[1,1]):o.baseSize=m.baseSize,o.position?(o.position[0]===n&&(o.position[0]=m.position[0]),o.position[1]===n&&(o.position[1]=m.position[1])):o.position=m.position,o.origin?("string"==typeof o.origin[0]&&(o.origin[0]=c[o.origin[0]]),"string"==typeof o.origin[1]&&(o.origin[1]=c[o.origin[1]])):o.origin=m.origin,o.scale?"number"==typeof o.scale&&(o.scale=[o.scale,o.scale]):o.scale=o.size?[o.size[0]/o.baseSize[0],o.size[1]/o.baseSize[1]]:m.scale,y=[o.scale[0]*o.baseScale[0],o.scale[1]*o.baseScale[1]],u.data("transform",o),f&&!p?((o.origin[0]!==m.origin[0]||o.origin[1]!==m.origin[1])&&(g[e+"transform-origin"]=100*o.origin[0]+"% "+100*o.origin[1]+"%"),g[e+"transform"]="translate("+(o.origo[0]+o.position[0])+"px,"+(o.origo[1]+o.position[1])+"px)"+(1===y[0]&&1===y[1]?"":" scale("+y[0]+","+y[1]+")")+(o.rotate?" rotate("+o.rotate+"deg)":""),i?(g[e+"transition-property"]=e+"transform"+(o.opacity!==n?", opacity":""),g[e+"transition-duration"]=i+"ms",a&&(g[e+"transition-timing-function"]=a),"function"==typeof l&&(u.one(s,b),setTimeout(b,i+50)),u.css(g)):(g[e+"transition"]="none",u.css(g),"function"==typeof l&&setTimeout(function(){l.call(u[0])},50))):(g.left=o.origo[0]+o.position[0],g.top=o.origo[1]+o.position[1],o.size!==n?(g.width=o.size[0],g.height=o.size[1]):(g.width=o.baseSize[0]*y[0],g.height=o.baseSize[1]*y[1],g.left-=(g.width-o.baseSize[0])*o.origin[0],g.top-=(g.height-o.baseSize[1])*o.origin[1]),i?u.animate(g,i,l):(u.css(g),"function"==typeof l&&setTimeout(function(){l.call(u[0])},50))),this}}(jQuery,window,document);
!function(e,t,n){"use strict";e.fn.swipe=function(o){o=e.extend({onSwipedLeft:!1,onSwipedRight:!1,onSmallSwipe:!1,onClick:!1,onFinished:!1,treshold:20,swipeoutSpeed:300,overTreshold:.25},o);var a=function(e){return[e.outerWidth(),e.outerHeight()]},i=function(t){return e.isArray(t)?Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)):Math.abs(t)},r=function(e){return e.touches&&1===e.touches.length?[Math.round(e.touches[0].pageX),Math.round(e.touches[0].pageY)]:null!==e.clientX?[Math.round(e.pageX),Math.round(e.pageY)]:null},u=function(e){return e.touches&&1===e.touches.length?Math.round(e.touches[0].pageX):null!==e.pageX?Math.round(e.pageX):null};return this.each(function(){var s,l,d,p,c,h,f,g=e(this),w=g.parent(),m=g.data("lsw_ns")||"lsw_"+Math.floor(1e4*Math.random()),v=!0,S=null,T=function(e){return g.data("scrolling")?!1:e.originalEvent.touches&&e.originalEvent.touches.length>1||"mousedown"===e.type&&1!==e.which?!0:("touchstart"!==e.type&&e.preventDefault(),g.stop(!0,!1),g.data("scrolling",!1),g.data("swipeEnded",!1),g.data("taplength",0),p=(new Date).getTime(),l=l||a(w),s=s||a(g),v=l[1]>=s[1],v?(c=u(e.originalEvent),h=0,f=g.translateX()):(c=r(e.originalEvent),h=[0,0],f=g.translate()),"mousedown"===e.type&&(n.on("mousemove."+m,M),g.on("mouseup."+m+" mouseout."+m,y)),"touchstart"===e.type)},M=function(e){return e.originalEvent.touches&&e.originalEvent.touches.length>1?!0:(e.preventDefault(),v?(h=u(e.originalEvent)-c,g.translateX(f+h)):(h=r(e.originalEvent),h[0]-=c[0],h[1]-=c[1],g.translate([f[0]+h[0],f[1]+h[1]])),!1)},y=function(e){if(g.data("swipeEnded"))return!0;e.preventDefault(),g.data("swipeEnded",!0);var t=(new Date).getTime()-p,a=1+o.swipeoutSpeed/t,r=function(){"function"==typeof o.onFinished&&o.onFinished.call(g[0],e)},u=function(){h&&"function"==typeof o.onSmallSwipe&&o.onSmallSwipe.call(g[0],e),"function"==typeof o.onClick&&o.onClick.call(g[0],e)},d=function(t){t?"function"==typeof o.onSwipedRight&&o.onSwipedRight.call(g[0],e):"function"==typeof o.onSwipedLeft&&o.onSwipedLeft.call(g[0],e)};if(("mouseup"===e.type||"mouseout"===e.type)&&(n.off("mousemove."+m),g.off("mouseup."+m+" mouseout."+m),g.data("taplength",t)),v)if(Math.abs(h)>o.treshold){var c=f+h*a;l[0]>=s[0]||h>0&&c-s[0]/2>l[0]*(o.overTreshold-.5)||c+s[0]/2<l[0]*(.5-o.overTreshold)?(g.data("scrolling",!1),g.translateXAndFade(c,0,o.swipeoutSpeed),S=setTimeout(r,o.swipeoutSpeed+20),d(h>0)):g.translateX(c,o.swipeoutSpeed)}else h&&g.translateX(0,100),u();else if(i(h)>o.treshold){var w=parseInt(g.css("top")),c=[f[0]+h[0]*a,h[1]>0?Math.min(-w,f[1]+h[1]*a):Math.max(-w+l[1]-s[1],f[1]+h[1]*a)];h[0]>0&&c[0]-s[0]/2>l[0]*(o.overTreshold-.5)||c[0]+s[0]/2<l[0]*(.5-o.overTreshold)?(g.data("scrolling",!1),g.translateAndFade(c,0,o.swipeoutSpeed),S=setTimeout(r,o.swipeoutSpeed+20),d(h[0]>=0)):g.translate(c,o.swipeoutSpeed)}else(h[0]||h[1])&&g.translate([0,0],100),u();return!1},E=function(e){return e.preventDefault(),!1},X=function(){setTimeout(function(){g.data("scrolling",!1)},20),g.removeAttr("draggable"),g.add(n).off("."+m)};g.add(n).off("."+m),g.data("lsw_ns",m),t.on("resize."+m,function(){clearTimeout(d),d=setTimeout(function(){l=a(w)},50)}),g.attr("draggable","true").on(TOUCH.START+"."+m+" dragstart."+m+" mousedown."+m,T).on(TOUCH.MOVE+"."+m+" drag."+m,M).on(TOUCH.END+"."+m,y).on("removeSwipe."+m,X).on("selectstart."+m,E)})}}(jQuery,jQuery(window),jQuery(document));
!function(e,n,t){"use strict";e.fn.addMap=function(n){n=e.extend({},e.fn.addMap.defaults,n);var o=function(e){var n,t;return"string"==typeof e?(e=e.split(","),n=parseFloat(e[0]),t=e.length>1?parseFloat(e[1]):0):(n=e[0]||e.lat||0,t=e[1]||e.lng||0),{lat:n,lng:t}},a=function(e){for(var n=0;n<e.length;n++)e[n].hasOwnProperty("pos")&&!e[n].hasOwnProperty("latLng")&&(e[n].latLng=o(e[n].pos))},r=function(e){for(var n,t=-180,o=-90,a=90,r=180,s=0;s<e.length;s++)n=e[s].latLng,n&&(r>n.lng&&(r=n.lng),a>n.lat&&(a=n.lat),t<n.lng&&(t=n.lng),o<n.lat&&(o=n.lat));return r>t&&(t=180,r=-180),a>o&&(o=90,a=-90),{east:t,west:r,north:o,south:a}},s=function(e,n){if("undefined"==typeof google||!google.maps){var o=t.createElement("script");return o.type="text/javascript",o.src=n.apiUrl+("undefined"==typeof n.apiKey?"":"?key="+n.apiKey),o.onload=function(){setTimeout(function(){l(e,n)},40)},void t.body.appendChild(o)}l(e,n)},l=function(n,t){var s,l,i=function(){e.isFunction(t.click)&&t.click.call(this)};if(t.markers&&t.markers.length>1){a(t.markers);var p=r(t.markers),g=t.markers.length;s=new google.maps.Map(n[0],{center:{lat:(p.north+p.south)/2,lng:(p.east+p.west)/2},zoom:t.zoom,mapTypeId:t.type,scrollwheel:!1,panControl:!1});for(var d=0;g>d;d++)t.markers[d].hasOwnProperty("latLng")&&(l=new google.maps.Marker({position:t.markers[d].latLng,map:s}),t.markers[d].hasOwnProperty("title")&&l.setTitle(t.markers[d].title),t.markers[d].hasOwnProperty("link")&&(l.link=t.markers[d].link,google.maps.event.addListener(l,"click",i)));!t.fitBounds||p.east===p.west&&p.north===p.south||google.maps.event.addListenerOnce(s,"idle",function(){s.fitBounds(p)})}else{var m=o(t.location||t.markers[0].pos);s=new google.maps.Map(n[0],{center:m,zoom:t.zoom,mapTypeId:t.type,scrollwheel:!1,panControl:!1}),l=new google.maps.Marker({position:m,map:s})}t.hasOwnProperty("onTypeChanged")&&e.isFunction(t.onTypeChanged)&&google.maps.event.addListener(s,"maptypeid_changed",function(){t.onTypeChanged.call(s.getMapTypeId())}),t.hasOwnProperty("onZoomChanged")&&e.isFunction(t.onZoomChanged)&&google.maps.event.addListener(s,"zoom_changed",function(){t.onZoomChanged.call(s.getZoom())})};return e(this).each(function(){s(e(this),e.extend(n,readData(e(this),"location,type,zoom,label,markers,current")))})},e.fn.addMap.defaults={apiUrl:"https://maps.googleapis.com/maps/api/js",zoom:16,fitBounds:!0,type:"roadmap"}}(jQuery,window,document);
!function(t,e,n,i){"use strict";t.fn.slider=function(o){o=t.extend({delegate:"ul li",fill:"img.fill",auto:!0,speed:600,delay:4e3,preloadNext:!0},o);var a,s=t(this),r=s.data("lsl_ns")||"lsl_"+Math.floor(1e4*Math.random()),u=t([]),l=t(),f=1,c=s.width(),d=s.height(),h=t(),p=t(),m=0,g=0,v=0,w=null,M=!1,T=function(t){return t.touches&&1===t.touches.length?Math.round(t.touches[0].pageX):null!==t.pageX?Math.round(t.pageX):null},y=function(t){return t.touches&&1===t.touches.length?[Math.round(t.touches[0].pageX),Math.round(t.touches[0].pageY)]:null!==t.clientX?[Math.round(t.pageX),Math.round(t.pageY)]:null},b=function(t){var e=t,n=0;0>e?e+=u.length:e>=u.length&&(e%=u.length),w=clearTimeout(w),M=!1,h.hide();var i=u.filter(":visible");if(i.length>1&&i.not(l).hide(),l.length){if(n=u.index(l),e===n)return!0;f=t>n?1:-1,O()}v=0,q(e),l=u.eq(e),setTimeout(function(){o.fill?x(function(){E()}):E()},10)},x=function(e){var n=l.find(o.fill);t("<img>").one("load",function(i){var o=i.target;o&&k(n,o.width,o.height),t.isFunction(e)&&e.call(this)}).attr("src",n.attr("src"))},k=function(t,e,n){var i=Math.max(c/e,d/n),o=[Math.ceil(e*i),Math.ceil(n*i)];t.transform({origo:[Math.round((c-e)/2),Math.round((d-n)/2)],baseScale:i,baseSize:[e,n]}).data("fillSize",o)},O=function(){var e=l;switch(e.css({"z-index":0}),o.transition){case"slideOver":setTimeout(function(){e.stop(!0,!1).show(),e.opacity(.4,o.speed,function(){e.hide()})},50);break;case"slide":setTimeout(function(){e.transform({position:[-c*f,i]},o.speed,function(){t(this).hide()})},60);break;case"kenburns":default:e.data("swiped")||e.opacity(0,o.speed,function(){e.hide()})}},E=function(){var e=l;switch(e.css({"z-index":1}),o.transition){case"slideOver":e.show().transform({position:[100*f,0],opacity:0},function(){t(this).transform({position:[0,0],opacity:1},o.speed,z)});break;case"slide":e.show().transform({position:[c*f,i]},function(){t(this).transform({position:[0,i]},o.speed,z)});break;case"kenburns":var n=e.find(o.fill),a=n.data("fillSize");setTimeout(function(){e.show().transform({position:[0,0],opacity:0},function(){var i=Math.random();i>.5?(i=1.05+.4*(i-.5),n.transform({position:[Math.random()*i*(c-a[0])/2,Math.random()*i*(d-a[1])/2],scale:i},function(){t(this).transform({position:[0,0],scale:1},o.speed,z)})):(i=1.05+.4*i,n.transform({position:[Math.random()*i*(c-a[0])/2,Math.random()*i*(d-a[1])/2],scale:i},o.speed,z)),e.opacity(1,o.speed,function(){})})},o.speed/8);break;default:e.transform({position:[0,0],opacity:0},function(){t(this).show().opacity(1,o.speed,z)})}},z=function(){clearTimeout(w),M||(w=setTimeout(0>f?S:X,Math.max(o.delay,o.speed)))},C=function(){w&&(w=clearTimeout(w)),M?(X(),M=!1):(h.fadeIn(100,function(){setTimeout(function(){h.fadeOut(1e3,function(){t(this).hide()})},1e3)}),M=!0)},D=function(t){if(t){var e=t[0]-s.offset().left,n=t[1]-s.offset().top;n>.9*d?b(Math.floor(e*u.length/c)):e>.9*c?X():.1*c>e?S():C()}},S=function(){b((l.length?u.index(l):0)-1)},X=function(){b((l.length?u.index(l):0)+1)},q=function(t){return p.children("span").css({left:p.width()*t/u.length}),!0};return s.add(e).off("."+r),s.data("lsl_ns",r),s.find(o.delegate).each(function(){var e=t(this),f=function(t){return e.stop(!0,!1),a=(new Date).getTime(),m=T(t.originalEvent),"mousedown"===t.type&&(n.on("mousemove."+r,c),s.on("mouseup."+r+" mouseout."+r,d)),"touchstart"===t.type},c=function(t){return a?(g=T(t.originalEvent),v=g-m,l.transform({position:[v,i]}),!1):!0},d=function(t){var e=(new Date).getTime()-a;return a=0,n.off("mousemove."+r),s.off("mouseup."+r+" mouseout."+r),Math.abs(v)>50?(l.data("swiped",!0),l.transform({position:[v*(1+1e3/e),i]},1e3,function(){l.data("swiped",!1)}),v>0?S():X()):(l.transform({position:[0,i]},300),D(y(t.originalEvent))),!1},h=function(t){return t.preventDefault(),!1};u=u.add(e),e.add(e.find(o.fill)).css({position:"absolute"}),e.attr("draggable","true").on(TOUCH.START+"."+r+" mousedown."+r,f).on(TOUCH.MOVE+"."+r,c).on(TOUCH.END+"."+r+" "+TOUCH.CANCEL+"."+r,d).on("selectstart."+r,h)}),u.filter(":visible").length?(l=u.filter(":visible").eq(0),u.not(l).hide()):(l=u.eq(0),l.show()),x(),u.length>1&&(s.on("goto."+r,function(t){return gotoImage(t),!1}).on("quit."+r,function(){return quitSlider(),!1}).on("next."+r,function(){return nextImage(),!1}).on("previous."+r,function(){return previousImage(),!1}),h=t("<div>",{"class":"slider-pause"}).hide().on("click."+r,function(t){return t.preventDefault(),X(),!1}).appendTo(s),p=t("<div>",{"class":"slider-progress"}).on("click."+r,function(t){t.preventDefault();var e=T(t.originalEvent);return null!==e&&b(Math.floor((e-p.offset().left)*u.length/p.width())),!1}).append(t("<span>").css({left:"0",width:100/u.length+"%"})).appendTo(s),w=setTimeout(X,o.delay+1e3)),e.on("resize."+r,function(){c=s.width(),d=s.height(),u.each(function(){t(this).css({width:"100%",height:"100%"})}),q(),o.fill&&x()}),this}}(jQuery,jQuery(window),jQuery(document));
!function(t){"use strict";t.fn.lightbox=function(o){o=t.extend({},t.fn.lightbox.defaults,o);var e,n,a,i,s,l,d=getTranslations(t.fn.lightbox.text),r=t([]),c=t(),u=t(),h=t(),p=t(),g=!0,f=!1,m=!1,b=!1,w=!1,T=-1,v=0,y=0,A=t(this).data("llb_ns"),x=!!o.hasOwnProperty("extraSizes")&&o.extraSizes.split(/,\s*/),C=function(t){_.find(".modal").trigger("destroy")},O=function(e){var i,l,d,r,c=u[0];clearTimeout(s),u&&u.length&&((i=u.data("oWidth"))||(i=typeof c.naturalWidth===UNDEF?c.width||u.width():c.naturalWidth),(l=u.data("oHeight"))||(l=typeof c.naturalHeight===UNDEF?c.height||u.height():c.naturalHeight),i&&l?(u.data({oWidth:i,oHeight:l}),d=a-(p.length&&o.fitAboveCaption?p.outerHeight():0),r=Math.min(n*o.fitRatio/i,d*o.fitRatio/l),o.fitImages&&!b&&(r<1||o.scaleUp)&&(i=Math.round(i*r),l=Math.round(l*r)),!0===e?u.css({left:Math.round((n-i)/2),top:Math.round((d-l)/2),width:i,height:l,opacity:0}).show():u.stop(!0,!1).animate({left:Math.round((n-i)/2),top:Math.round((d-l)/2),width:i,height:l},300,function(){t(this).translateX(0,300)}),t.cookie("fitImages",o.fitImages),V.toggleClass("active",r>=o.fitRatio&&o.fitImages||r<1&&!o.fitImages).toggleClass("invisible",b||r>=1&&!o.scaleUp)):e&&(s=setTimeout(O,!0,100)))},I=function(){var t=_.find(".lightbox-main"),e=_.find(".lightbox-caption");t.length&&(w||t.translateXAndFade(-100*y,0,o.speed,function(){t.remove()}),t.off("."+A)),e.length&&(e.find(".buttons a").trigger("removeTooltip"),e.length>1&&(e.eq(-1).prevAll(".lightbox-caption").remove(),e=_.find(".lightbox-caption")),e.opacity(0,o.speed,function(){e.remove()}))},P=function(t){f="video"===t[J.CATEGORY],m="audio"===t[J.CATEGORY],b="other"===t[J.CATEGORY],g=!f&&!m&&!b},k=function(n){p=t("<div>",{class:"lightbox-caption"+(i?" slideshow":"")}).hide().appendTo(_);var a=t("<div>",{class:"buttons"});if(x&&"image"===n[J.CATEGORY]){e=t("<div>",{class:"download icon-download"}).appendTo(a);for(var s=Album.getImagePath(n),l=0;l<x.length;l++)e.append(t("<a>",{text:x[l],href:s.replace("slides/","dl/"+x[l]+"/"),download:""}))}o.share&&a.renderShares({sites:o.share,title:n[J.TITLE]||n[J.NAME],description:n[J.COMMENT],image:Album.getAbsoluteImagePath(n),href:Album.getAbsolutePath(n)}),o.printImage&&"image"===n[J.CATEGORY]&&(e=t("<a>",{class:o.buttonClass+" icon-printer",text:" "+d.print}).appendTo(a)).on("click",function(t){printImage(n[J.ORIGINAL]&&!o.rightClickProtect?n[J.ORIGINAL][J.PATH]:n[J.IMAGE][J.PATH],n[J.TITLE]||"",n[J.THUMBCAPTION]||"")}),!n[J.ORIGINAL]||o.rightClickProtect||"image"!==n[J.CATEGORY]&&!o.allowDownloadOthers||a.append(t("<a>",{class:o.buttonClass+" icon-download",text:" "+d.download,download:"",href:n[J.ORIGINAL][J.PATH]})),o.hasOwnProperty("shop")&&c.find(".add-cart").length&&(e=t("<a>",{class:o.buttonClass+" icon-shopping-cart",text:" "+d.addCart}).appendTo(a)).on("click",function(e){var a=t(e.target);o.shop.root.trigger("addItems",n),t.cookie("shoppingCartInfo")||(_.modal(t("<div>",{html:d.shoppingcartInfo})),t.cookie("shoppingCartInfo",!0,86400)),a.addClass("disabled").text(d.added),setTimeout(function(){a.removeClass("disabled").text(d.addCart)},1e3)}),n[J.PHOTODATA]&&(e=t("<a>",{class:o.buttonClass+" icon-camera",text:" "+d.photoData}).appendTo(a)).on("click",function(){return _.modal(t("<div>",{class:"photodata",html:n[J.PHOTODATA]}),{class:"small",title:d.photoData}),!1}),n[J.LOCATION]&&(e=t("<a>",{class:o.buttonClass+" icon-location",text:" "+d.map}).appendTo(a)).on("click",function(){var e=t("<div>",{class:"map-cont"});return e.height(t(window).height()*o.mapHeight),_.modal(e,{class:"no-padding"}),setTimeout(function(){e.addMap({location:n[J.LOCATION],type:o.mapType,zoom:o.mapZoom,fitBounds:!1,onTypeChanged:function(t){o.mapType=t},onZoomChanged:function(t){o.mapZoom=t}})},100),!1}),n[J.MOSTPHOTOS]&&a.append(t("<a>",{class:o.buttonClass+" icon-shopping-cart",text:" "+d.buyImage,target:"_blank",href:"http://mostphotos.com/"+n[J.MOSTPHOTOS]})),a.is(":empty")||(p.addClass("hasbuttons"),p.append(a)),n[J.IMAGECAPTION]&&(p.append(t("<div>",{class:"caption",html:n[J.IMAGECAPTION]})),p.find("[data-tooltip]").addTooltip()),p.toggle(!i||p.children(".caption").length>0)},E=function(){var t;y<0&&T>0?t=r.eq(T-1).data(J.OBJ):T<r.length-2&&(t=r.eq(T+1).data(J.OBJ)),t&&"image"===t[J.CATEGORY]&&((new Image).src=Album.getImagePath(t))},S=function(t){var o="mouseup"!==t.type;if(f||m){var e=h[0];e.paused?(e.play(),e.controls=!1,z()):(e.pause(),e.controls=!0,U(),Y())}else g&&(o?!p.is(":visible")||p.css("opacity")<1?(Y(),U()):(W(),q()):(t.pageX||t.originalEvent.pageX)-u.position().left>u.width()/2?Z():X())},D=function(){if(!(--v>0)){if(DEBUG){var e=new Date;console.log((f||m?"Media":"Image")+" ["+T+"] loaded: "+(e-l)+'ms src="'+u[0].src+'"'),typeof u[0]!==UNDEF&&typeof h[0]!==UNDEF||console.log((u[0],UNDEF,"loadImage.done("+u[0].src+")"))}u.css({opacity:0}).hide(),o.rightClickProtect&&h.on("contextmenu",function(t){return t.preventDefault(),!1}),(f||m)&&(h.attr("autoplay",o.videoAuto),h[0].volume=o.volume,h[0].onvolumechange=function(){o.volume=this.volume},z()),u.translateX(100*y),setTimeout(function(){O(!0),K.hide(),u.show().translateXAndFade(0,1,o.speed),setTimeout(function(){u.swipe({onSwipedLeft:function(){w=!0,Z()},onSwipedRight:function(){w=!0,X()},onFinished:function(){t(this).trigger("removeSwipe"),t(this).remove()},onClick:S}),!1!==o.onLoadEnd&&o.onLoadEnd(c),o.preloadNext&&E()},o.speed/2)},50),i?m||f?(B(),h[0].onended=function(){G()}):(clearTimeout(i),tt.find(".progress").show(),i=setTimeout(Z,o.slideshowDelay)):H()}},M=function(e){if("number"!=typeof e&&(e=r.index(e)),e<0||e>r.length)return e<0&&!1!==o.onBeforeFirst?o.onBeforeFirst(_):!1!==o.onAfterLast&&o.onAfterLast(_),void L();if(_.is(":visible")){if(y=T>e?-1:T<e?1:0,T===e)return}else t("body").css("overflow","hidden"),y=0,_.show();C();var n;if(T=e,c=r.eq(T),!(n=c.data(J.OBJ)))return void console.log("Fatal error: image ("+T+") is missing from the database! (Upload data1.json again!)");K.show(),tt.find(".progress").hide(),P(n),!1!==o.onLoadStart&&o.onLoadStart(c),setTimeout(function(){I(),w=!1,v=1,l=new Date,f?h=u=t("<video>",{class:"lightbox-main video",preload:"auto",controls:"true",poster:Album.getImagePath(n)}).one("loadedmetadata",function(t){D()}).hide().attr("src",Album.getSourcePath(n)).appendTo(_):g?(h=u=t("<img>",{class:"lightbox-main image"}).one("load."+A,function(t){D()}).hide().attr("src",Album.getImagePath(n)).appendTo(_),DEBUG&&console.log("Loading image ["+T+'] src="'+Album.getImagePath(n)+'"'),u[0].complete&&u[0].naturalWidth>0&&(u.off("load."+A),D())):(u=t("<div>",{class:"lightbox-main "+n[J.CATEGORY]}).hide().appendTo(_),m?(v=2,t("<img>",{class:"poster"}).one("load",function(t){D()}).attr("src",Album.getImagePath(n)).appendTo(u),h=t("<audio>",{preload:"auto",controls:"true"}).one("loadedmetadata",function(t){D()}).attr("src",Album.getSourcePath(n)).appendTo(u)):(t("<a>",{href:Album.getSourcePath(n),target:"_blank"}).append(t("<img>",{class:"other"}).one("load",function(t){D()}).attr("src",Album.getImagePath(n))).appendTo(u),t("<p>",{class:"click-hint",html:d.clickToOpen}).appendTo(u))),k(n)},o.speed/4)},L=function(){H(),t("body").css("overflow",""),u.length?_.fadeOut(o.speed,function(){u.length&&(u.remove(),u=t()),p.length&&(p.remove(),p=t()),!1!==o.onEnd&&o.onEnd(c)}):!1!==o.onEnd&&o.onEnd(c)},R=function(){H(),r.off("."+A),t(document).add(t(window)).add(_).off("."+A),t("body").css("overflow",""),u.length?u.animate({opacity:0},o.speed,function(){_.remove()}):_.remove()},N=function(){clearTimeout(i),$.hide(),tt.show(),z(),p.addClass("slideshow"),i=setTimeout(Z,o.slideshowDelay/4),!1!==o.onSlideshowStart&&o.onSlideshowStart(c)},G=function(){i=setTimeout(Z,o.slideshowDelay/4),tt.find(".progress").show()},H=function(){!1!==o.onSlideshowPause&&o.onSlideshowPause(c),i=clearTimeout(i),p.show().removeClass("slideshow"),$.show(),tt.hide(),Q.show(),ot.add(et).add(V).show()},B=function(){i=clearTimeout(i),tt.find(".progress").hide(),z()},F=function(){o.fitImages=!o.fitImages,O()},U=function(){p.show()},q=function(){p.fadeOut(1e3)},Y=function(){Q.add(V).show()},W=function(){Q.add(V).fadeOut(1e3)},z=function(){setTimeout(function(){W(),q()},i?Math.min(o.slideshowDelay/2,2e3):2e3)},X=function(){T>0?M(T-1):(!1!==o.onBeforeFirst&&o.onBeforeFirst(),L())},Z=function(){T<r.length-1?M(T+1):(!1!==o.onAfterLast&&o.onAfterLast(),L())};A&&function(o){t(window).add(document).off("."+o),t("#"+o).remove()}(A),t(this).data("llb_ns",A="llb_"+Math.floor(1e4*Math.random())),r=t(this).find(o.delegate);var _=t("<div>",{id:A,class:"lightbox"}).hide().appendTo("body"),j=t("<div>",{class:"lightbox-overlay"}).appendTo(_),K=t("<div>",{class:"lightbox-loading"}).append("<div>").appendTo(_),Q=t("<button>",{type:"button",class:"lightbox-btn close",title:d.close}).on("click."+A,function(){return L(),!1}).appendTo(_),V=t("<button>",{type:"button",class:"lightbox-icon zoom icon-expand",title:d.toggleZoom}).on("click."+A,function(){return F(),!1}).appendTo(_),$=t("<button>",{type:"button",class:"lightbox-icon play icon-play",title:d.slideshow}).on("click."+A,function(){return N(),!1}).appendTo(_),tt=t("<button>",{type:"button",class:"lightbox-icon pause icon-pause",title:d.pause}).append(t("<span>",{class:"progress"})).hide().on("click."+A,function(){return H(),!1}).appendTo(_),ot=r.length?t("<button>",{type:"button",class:"lightbox-btn arrow-left"}).on("click."+A,function(){return X(),!1}).appendTo(_):t(),et=r.length?t("<button>",{type:"button",class:"lightbox-btn arrow-right"}).on("click."+A,function(){return Z(),!1}).appendTo(_):t(),nt=null;if(n=_.width(),a=_.height(),t(window).on("resize."+A,function(){clearTimeout(nt),nt=setTimeout(function(){clearTimeout(nt),n=Math.min(_.width(),t(window).width()),a=Math.min(_.height(),t(window).height()),u&&u.length&&O()},50)}),o.quitOnDocClick&&j.on("click."+A,function(o){u.length&&!t(o.target).is(u)&&L()}),o.enableKeyboard&&t(document).on("keyup."+A,function(t){if(!u.length||_.children(".modal:visible").length)return!0;switch(t.preventDefault(),t.keyCode){case 27:L();break;case 37:X();break;case 39:Z();break;case 107:F();break;case 32:f||m?h[0].paused?h[0].play():h[0].pause():i?H():N();break;default:return!0}return!1}),o.enableMouseWheel){var at=null;t(window).on("mousewheel."+A+" DOMMouseScroll."+A,function(t){return at=clearTimeout(at),!(u.length&&!_.children(".modal:visible").length)||(at=setTimeout(t.originalEvent.wheelDelta>0||t.originalEvent.detail<0?X:Z,100),!1)})}return t(this).on("lightboxLoad."+A,function(t,e){H(),!1!==o.onStart&&o.onStart("number"==typeof e?r.eq(e):th),M(e)}).on("lightboxQuit."+A,function(){return L(),!1}).on("lightboxRemove."+A,function(){return R(),!1}).on("lightboxContainer."+A,function(){return _}).on("lightboxNext."+A,function(){return H(),Z(),!1}).on("lightboxPrevious."+A,function(){return H(),X(),!1}),_.find("button").addTooltip(),o.hasOwnProperty("auto")&&t.isNumeric(o.auto)&&(o.auto<0&&(o.auto=r.length+o.auto),!1!==o.onStart&&o.onStart(r.eq(o.auto)),M(o.auto)),o.hasOwnProperty("onReady")&&o.onReady(c),this},t.fn.lightbox.defaults={delegate:"li",buttonClass:"secondary button small",auto:!1,slideshowDelay:4e3,fitImages:!1,scaleUp:!0,fitRatio:.94,fitAboveCaption:!0,mapHeight:.8,videoAuto:!1,volume:.5,rightClickProtect:!1,allowDownloadOthers:!0,printImage:!1,speed:400,preloadNext:!0,enableKeyboard:!0,enableMouseWheel:!0,quitOnEnd:!0,quitOnDocClick:!0,onStart:!1,onEnd:!1,onLoadStart:!1,onLoadEnd:!1,onAfterLast:!1,onBeforeFirst:!1,onReady:!1,onSlideshowStart:!1,onSlideshowPause:!1},t.fn.lightbox.text={close:"Close",slideshow:"Slideshow",pause:"Pause",toggleZoom:"Toggle zoom",download:"Download",print:"Print",map:"Map",buyImage:"Buy image",photoData:"Photo data",addCart:"Add to cart",added:"Added...",shoppingcartInfo:'This item is placed into the "Shopping cart". You can buy it by clicking the "Buy now" button after you quit the lightbox.',clickToOpen:"Click to open this document with the associated viewer!"}}(jQuery);
!function(t){"use strict";var o=["left","center","right"],e=["top","middle","bottom"];t.fn.alignTo=function(s,a){if(a=t.extend({},t.fn.alignTo.defaults,a),"string"==typeof s&&(s=t(s)),s instanceof t&&s.length){var n,p,i,r=t(window).width(),l=t(window).height(),f=function(o){var e={left:0,top:0};return o.parents().each(function(){if("fixed"===t(this).css("position"))return e.left=t(window).scrollLeft(),e.top=t(window).scrollTop(),!1}),e}(s);if("AREA"===s[0].nodeName&&"RECT"===s[0].shape.toUpperCase()){var d=s[0].coords.split(",");p=parseInt(d[2],10)-parseInt(d[0],10),i=parseInt(d[3],10)-parseInt(d[1],10),(n=s.parent().offset()).left+=parseInt(d[0],10),n.top+=parseInt(d[1],10)}else n=s.offset(),p=s.outerWidth(),i=s.outerHeight();return n.left-=f.left,n.top-=f.top,t(this).each(function(){var s=t(this),d=a.pos[2],g=a.pos[3];s.css("maxHeight","none");var h=s.outerWidth(),c=s.outerHeight(),u=Math.round(n.left+a.pos[2]*p/2+(a.pos[2]-1)*a.gap),v=Math.round(n.top+a.pos[3]*i/2+(a.pos[3]-1)*a.gap),w=Math.round(u-a.pos[0]*h/2),m=Math.round(v-a.pos[1]*c/2);(m<0||m+c>l)&&(1!==a.pos[2]?m=2*m+c>l?l-c:0:0===a.pos[3]?l>2*n.top+i&&(m=n.top+i+a.gap,g=2):2===a.pos[3]&&l<2*n.top+i&&(m=Math.max(0,n.top-c-a.gap),g=0),m<0&&(m=0),m+c>l&&s.css({overflow:"auto",maxHeight:l-m-(parseInt(s.css("paddingTop"),10)+parseInt(s.css("paddingBottom"),10))}).css({overflow:"hidden"})),(w<0||w+h>r)&&(1!==a.pos[3]?w=2*w+h>r?r-h:0:0===a.pos[2]?r>2*n.left+p&&(w=n.left+p+a.gap,d=2):2===a.pos[2]&&r<2*n.left+p&&(w=Math.max(0,n.left-h-a.gap),d=0),w<0&&(w=0),w+h>r&&s.css({overflow:"auto",maxWidth:r-w-(parseInt(s.css("paddingLeft"),10)+parseInt(s.css("paddingRight"),10))}).css({overflow:"hidden"})),s.css({position:"absolute",left:w+f.left,top:m+f.top}).removeClass("align-left align-center align-right valign-top valign-middle valign-bottom").addClass("align-"+o[d]).addClass("valign-"+e[g])})}},t.fn.alignTo.defaults={gap:0,pos:[1,2,1,0]}}(jQuery);
!function(t){"use strict";t.fn.hideAllTooltips=function(){return this.each(function(){t(this).find("[data-tooltip-id]").each(function(){var e=t(this).attr("data-tooltip-id");e&&e.length&&t("#"+e).hide()})})},t.fn.destroyAllTooltips=function(){return this.each(function(){t(this).find("[data-tooltip-id]").each(function(){var e=t(this).attr("data-tooltip-id");e&&e.length&&t("#"+e).remove()})})},t.fn.addTooltip=function(e,o){void 0===e||"string"==typeof e||e.jquery||(o=e,e=null),o=t.extend({},t.fn.addTooltip.defaults,o);var i=function(e,i){var n;if(i)if("string"==typeof i)n=t("<div>",{html:i}).appendTo("body");else{if(!i.jquery)return null;n=t.contains(document.body,i[0])?i:i.appendTo("body")}else{if((i=e.data("tooltip"))?("."===i.charAt(0)?i=e.find(i).eq(0):"#"===i.charAt(0)&&(i=t(i)),i.jquery&&i.removeClass("hidden")):(i=e.attr("title"),e.removeAttr("title")),!i||!i.length)return null;n=t("<div>",{html:i}).appendTo("body")}return n.attr("id",e.attr("data-tooltip-id")).addClass(o.className).attr("role","tooltip").attr("aria-hidden",!0).hide().append(t("<span>",{class:o.nub})),n};return this.each(function(){if(this["data-tooltip-id"])return!0;var n,a,r,u,l,f=t(this),d=!1,s=!1,c="",p=!1,T="_ltt_"+Math.floor(1e4*Math.random()),h=/(Firefox\/\d+)/.test(navigator.userAgent),m=function(){return!!(n=i(f,e))&&(n.on("mouseover."+T,v).on("mouseout."+T,y),n.find("input, textarea").on("focus."+T,function(){s=!0,v()}).on("blur."+T,function(){s=!1}),!0)},v=function(t){r=clearTimeout(r),d=!0,n.finish().show()},y=function(t){s||(clearTimeout(r),d=!1,r=setTimeout(g,100))},g=function(){a=clearTimeout(a),r=clearTimeout(r),d=!1,c="",n&&n.stop(!0,!1).fadeOut(200,function(){n.hide()})},b=function(){var t=f.offset();u||(u=t),t.top===u.top&&t.left===u.left&&n.fadeIn(300).alignTo(f,{gap:10,pos:o.pos}),setTimeout(function(){c=""},1e3)},A=function(t){r=-1===c.indexOf(TOUCH.START)?setTimeout(g,100):setTimeout(g,8e3)},O=function(t){t.preventDefault(),a=clearTimeout(a),r=clearTimeout(r)},x=function(){return!!n&&n.is(":visible")&&n.css("opacity")>.99},C=function(t){var e=t.closest("a");return e.length&&e.attr("href")&&!e.attr("href").startsWith("javascript")},j=function(e){if(a=clearTimeout(a),-1!==c.indexOf(TOUCH.START)||h){var i=new Date;if(o.touchToggle||i-l>1e3)return!(!C(t(e.target))||!x())||(O(e),p?g():b(),!1)}return p&&(r=clearTimeout(r),g()),c="",d=!1,!0},q=function(t){var e=new Date;if(c?-1===c.indexOf(t.type)&&(c+="."+t.type):(c="."+t.type,p=x(),l=e,u=f.offset()),n)n.stop(!0,!1),r=clearTimeout(r);else if(!m())return H(),!0;return clearTimeout(a),t.type!==TOUCH.START&&(a=setTimeout(b,o.delay)),!0},H=function(e){f.off("."+T),a=clearTimeout(a),r=clearTimeout(r),t("#"+f.attr("data-tooltip-id")).remove(),f.attr("data-tooltip-id",null)};f.attr("data-tooltip-id",T).on("destroyTooltip",H).on("removeTooltip",g).on("focus."+T+" mouseenter."+T+" "+TOUCH.START+"."+T,q).on("blur."+T+" mouseleave."+T,A).on("click."+T,j)})},t.fn.addTooltip.defaults={delay:50,className:"tooltip",nub:"nub",stay:2e3,touchToggle:!1,pos:[1,2,1,0]}}(jQuery);
!function(e,t){"use strict";e.fn.modal=function(o,n,a){var l=e(this);if("string"==typeof o&&(o=e(document.createTextNode(o))),o instanceof e&&o.length){e.isArray(n)||(a=n,n=null),a=e.extend({},e.fn.modal.defaults,a);var i="lmo_"+Math.floor(1e4*Math.random()),d=getTranslations(e.fn.modal.text),s=e("<div>",{"class":"modal"}).appendTo(l),r=e("<div>",{"class":"window "+a["class"]||"",role:"dialog"}).appendTo(s),c=e("<a>",{"class":"btn close",title:d.closeWindow}).appendTo(r),u=e("<div>",{"class":"content"}).appendTo(r),f=null,h=null,p=function(){u.css({overflow:"auto",maxHeight:.8*t.height()-(a.title?c.height()+40:0)})},m=function(){return f=clearTimeout(f),s.destroyAllTooltips().animate({opacity:0},a.speed,function(){s.remove(),t.off("."+i)}),!1};if(s.on("destroy",m),s.hide().fadeIn(a.speed),c.add(s).on("click",function(e){e.target===this&&m()}),a.title&&r.addClass("has-header").prepend(e("<header>",{text:a.title})),p(),u.append(o.show()),n){var T,v,w=e("<div>",{"class":"buttons"}).appendTo(u),g=function(t){t.preventDefault();var o=t.target;return e.isFunction(o.handler)&&o.handler.call(this)!==!1&&m(),!1};for(T=0;T<n.length;T++)v=e("<button>",{"class":"button "+n[T].c,html:n[T].t}).on("click",g).appendTo(w),e.isFunction(n[T].h)&&(v[0].handler=n[T].h)}return a.autoFade&&(f=setTimeout(m,a.autoFade)),t.on("resize."+i,function(){clearTimeout(h),h=setTimeout(p,20)}),c.addTooltip(),this}},e.fn.modal.defaults={speed:300,autoFade:0,width:400,type:"normal"},e.fn.modal.text={closeWindow:"Close window"}}(jQuery,jQuery(window));
!function(e,t,a,n,o){"use strict";e.fn.selectable=function(t){t=e.extend({check:"checkbox"},t);var a,n=e(this).eq(0),o=function(t){var a=e(this).closest("li");return a.length&&a.toggleClass(J.ACTIVE),!1},i=function(){(a=t.selector?n.find(t.selector):n.children()).each(function(){e(this).children("span."+t.check).length||e(this).append(e("<span>",{class:t.check}).on({click:o}))})};return i(),n.on({selectAll:function(){if(n.is(":visible"))return a.not("."+J.ACTIVE).each(function(){e(this).addClass(J.ACTIVE)}),!1},selectNone:function(){if(n.is(":visible"))return a.filter("."+J.ACTIVE).each(function(){e(this).removeClass(J.ACTIVE)}),!1},selectInverse:function(){if(n.is(":visible"))return a.each(function(){e(this).toggleClass(J.ACTIVE)}),!1},refresh:i}),this},e.fn.skin=function(a){a=e.extend({},e.fn.skin.defaults,a);var o,i=e(a.contentHook),s=getTranslations({foundNTimes:"found {0} time(s)",notFound:"not found",search:"Search",newImages:"New images",label:"Label",addCart:"Add to cart",return:"return",inTheLastDay:"in the last day",inThePastNDays:"in the past {0} days",sinceMyLastVisit:"since my last visit",imagesAdded:"Images added",imagesModified:"Images modified",imagesTaken:"Images taken",cookiePolicyText:"This album uses cookies to remember user preferences. By using it, you agree to our use of cookies.",cookiePolicyAgree:"Got it",cookiePolicyLearnMore:"Learn more",more:"more",less:"less"}),r="",l=""!==window.location.hash,c=function(n){i.children("article").each(function(){if(this.hasOwnProperty("overlay")){var n=e(this).data("oly_ns");n&&t.off("."+n),e(this).find("."+a.thumbsClass).trigger("lightboxRemove"),e(this).remove()}else e(this).hide()});var o="ths_"+Math.floor(1e4*Math.random()),r=e("<article>",{class:(n.hasOwnProperty("articleClass")?n.articleClass+" ":"")+"cont overlay",id:o}).data("oly_ns",o).appendTo(i);r[0].overlay=!0,r=e("<section>",{class:a.thumbContClass}).appendTo(r);var l=e("<header>",{class:"clearfix "+(n.hasOwnProperty("icon")?n.icon:"")}).appendTo(r);return n.hasOwnProperty("title")&&l.append(e("<h4>",{html:n.title})),l.append(e("<a>",{class:"close",href:"",text:s.return}).on("click",function(){return h(),!1})),r},h=function(){return i.children("article").each(function(){if(this.hasOwnProperty("overlay")){var n=e(this).data("oly_ns");n&&t.off("."+n),e(this).find("."+a.thumbsClass).trigger("lightboxRemove"),e(this).remove()}else e(this).show(),f(e("."+a.foldersClass+">li"))}),removeParam(a.indexName),P(),null},d=function(){return i.find("article:visible section."+a.thumbContClass+" ."+a.thumbsClass)},u=function(t){var n;return i.find("article:visible section."+a.thumbContClass+" ."+a.thumbsClass+">li>a:first-child").each(function(){if((e(this).attr("href")||"").replace("slides/","")===t)return n=e(this),!1}),n?n.parent():e()},f=function(t){if(!(t.length<2)){var n=0,o=e(),i=function(t){var a,n=0;t.each(function(){(a=e(this).height())>n&&(n=a)}),t.height(n)};t.css("height","auto"),t.each(function(){var t=e(this),s=Math.floor(t.offset().top);o.length?s>n?(o.length===a.folderCols&&i(o),n=s,o=t):o=o.add(t):(n=s,o=t)}),o.length>1&&i(o)}},p=function(){var n=e("."+a.foldersClass).children(".lazyload");if(n){var o=t.height(),i=t.scrollTop();n.each(function(){var t=e(this).offset().top,a=e(this).height();if(t<i+o&&t+a>i&&(e(this).removeClass("lazyload"),function(t){t.append(e("<img>",{alt:t.data("alt"),class:"hide-image"}).one("load",function(){e(this).addClass("show-image").removeClass("hide-image"),function(t){for(var a=0,n=t,o=Math.floor(t.offset().top),i=t;(i=i.prev()).length&&!i.hasClass("lazyload")&&Math.floor(i.offset().top)===o;)n=n.add(i);for(i=t;(i=i.next()).length&&!i.hasClass("lazyload")&&Math.floor(i.offset().top)===o;)n=n.add(i);n.length>1&&(n.each(function(){e(this).height()>a&&(a=e(this).height())}),n.height(a))}(t.closest("li").height("auto"))}).attr("src",t.data("thumb")))}(e(this).children("a[data-thumb]").eq(0))),t>i+o)return!1})}};e.fn.renderThumbs=function(i,r){if(typeof i===UNDEF||!i.length||!e.isArray(i))return this;var l=e(this).eq(0),c=e(this).closest("article").data("oly_ns"),h=null,d=null,u=function(){var t=l.find("."+a.thumbsClass);return t.length||(t=e("<ul>",{class:a.thumbsClass+" clearfix"}).appendTo(l)),t}(),f=0,p=function(a){var o,i=function(){var t=e("<li>",{visibility:"hidden",height:0}).appendTo(u),a=Math.floor(.05+u.width()/t.outerWidth(!0));return t.remove(),a}(),s=u.children("li"),r=[],l=[],c=0,h=s.eq(0).outerWidth(!0),d=s.eq(0).width(),p=n.scrollTop()+t.height();f=i,function(e){var t,a;if("absolute"!==e.eq(0).css("position"))for(var n=e.length-1;n>=0;n--)a=(t=e.eq(n)).position(),t.css({position:"absolute",left:a.left,top:a.top})}(s.slice(0,f)),s.slice(f).hide();for(var g=0;g<f;g++)r[g]=0,l[g]=g*h;s.each(function(){g=function(){var e=0,t=r[0];for(g=1;g<r.length;g++)r[g]<t&&(t=r[g],e=g);return e}(),o=e(this).data(J.OBJ),e(this).css({position:"absolute",left:l[g],top:r[g]}).show(),o&&e(this).children("a.thumb").height(d*o[J.THUMB][J.HEIGHT]/o[J.THUMB][J.WIDTH]),r[g]+=e(this).outerHeight(!0),c=Math.max(c,r[g]),p&&r[g]>p&&(m(),p=0)}),u.height(c),p&&m()},m=function(){if(u.is(":visible")){var a=u.find(".lazyload"),n=t.height(),o=t.scrollTop();a.each(function(){var t=e(this).offset().top,a=e(this).height();if(t<o+n&&t+a>o&&b(e(this).removeClass("lazyload")),t>o+n)return!1})}},g=function(t){return"A"===t.target.nodeName||(u.trigger("lightboxLoad",u.children("li").index(e(t.currentTarget))),!1)},b=function(t){t.append(e("<img>",{src:Album.getThumbPath(t.closest("li").data(J.OBJ)),class:"hide-image"}).one("load",function(){e(this).addClass("show-image").removeClass("hide-image")}))};return c||e(this).closest("article").data("oly_ns",c="oly_"+Math.floor(1e4*Math.random())),l.append(e("<div>",{class:"progressbar"})),function(){for(var t,n,r,l,h,d,f=u.children("li"),p=(new Date,0);p<i.length;p++)d=i[p],p<f.length?n=(t=f.eq(p)).find("a.thumb"):(t=e("<li>").appendTo(u),Album.getThumbPath(d),l=d[J.THUMBCAPTION],n=e("<a>",{class:"thumb lazyload",href:Album.getItemPath(d)}).appendTo(t),l&&(t.addClass("hascaption"),r=e("<div>",{class:"caption",html:l}),a.captionAbove?t.prepend(r):t.append(r))),t.data(J.OBJ,d),a.fixGrid&&n.height((h||(h=t.width()))*d[J.THUMB][J.HEIGHT]/d[J.THUMB][J.WIDTH]),t.on("click."+c,g),!o||d.shop&&-1!==d.shop.indexOf('"options":"-"')||(n=e("<a>",{class:"icon-shopping-cart add-cart",text:" "+s.addCart}).appendTo(t)).on("click",function(t){var a=e(t.target).closest("li");return a.length&&o.trigger("addItems",a.data(J.OBJ)),!1}),a.rightClickProtect&&t.on("contextmenu",function(e){return e.preventDefault(),!1})}(),a.fixGrid&&(p(),t.on("resize."+c,function(e){return clearTimeout(d),d=setTimeout(p,500),!0})),m(),t.on("scroll."+c+" resize."+c,function(e){return clearTimeout(h),h=setTimeout(m,25),!0}),l.on("setactivethumb",function(a,n){if(n){var n=e(n),o=t.height(),i=t.scrollTop(),s=n.offset().top,r=n.outerHeight();s+r>i+o?e("html, body").stop(!0,!1).animate({scrollTop:Math.round(s-o+r+30)+"px"}):s<i&&e("html, body").stop(!0,!1).animate({scrollTop:Math.round(Math.max(s-30,0))+"px"})}}),e.isFunction(r)&&("undefined"!=typeof auto?r.call(void 0,u,auto):r.call(void 0,u)),l.find(".progressbar").remove(),this};var m=function(n,o){var i=c({articleClass:"tags-found",icon:"icon-label",title:"&ldquo;"+n+"&rdquo;"}),r=i.find("header h4");r.append(e("<span>",{class:"progressbar"})),(i.offset().top<t.scrollTop()||i.offset().top>t.scrollTop()+t.height()-100)&&t.scrollTop(i.offset().top),Album.collectItems(e.extend(a.tagCloud,{exact:!0,terms:'"'+n+'"',ready:function(){r.find(".progressbar").remove(),r.append(e("<small>",{text:this.length?s.foundNTimes.replace("{0}",this.length):s.notFound})),i.renderThumbs(this,w),o&&o.call()}}))},g=function(t,n){var o=c({articleClass:"search-results",icon:"icon-search",title:"&ldquo;"+t+"&rdquo;"}),i=o.find("header h4");i.append(e("<span>",{class:"progressbar"})),setTimeout(function(){Album.collectItems(e.extend(a.search,{terms:t,ready:function(){i.find(".progressbar").remove(),i.append(e("<small>",{text:this.length?s.foundNTimes.replace("{0}",this.length):s.notFound})),o.renderThumbs(this,w),n&&n.call()}}))},50)},b=function(e){return"dateTaken"==e?s.imagesTaken:"fileModified"==e?s.imagesModified:s.imagesAdded},v=function(t,n){var o=c({articleClass:"search-results",icon:"icon-star",title:b(a.searchNew.reference)+" "+getTimespan(t)}),i=o.find("header h4");i.append(e("<span>",{class:"progressbar"})),setTimeout(function(){Album.collectByDate(e.extend(a.searchNew,{range:t,ready:function(){i.find(".progressbar").remove(),i.append(e("<small>",{text:this.length?s.foundNTimes.replace("{0}",this.length):s.notFound})),o.renderThumbs(this,w),n&&n.call()}}))},50)},y=function(e){return e&&v(e,function(){setParam(a.indexName,{newimages:e},b(a.searchNew.reference)+" "+getTimespan(e)),P()}),!1},w=function(t,n){a.hasOwnProperty("shop")&&t.selectable(),t.trigger("lightboxRemove"),t.lightbox({auto:void 0!==n&&n,onLoadStart:function(e){var t=e.data(J.OBJ);t&&addParam(a.indexName,{img:Album.getItemName(t)},t[J.TITLE])},onLoadEnd:function(e){t.trigger("setactivethumb",e)},onEnd:function(){removeParam(a.indexName,"img")},onReady:function(){if(l&&window.location.hash){l=!1;var e=readParam();if(e.hasOwnProperty("label"))m(e.label,function(){addParam(a.indexName,{label:e.label,search:null,newimages:null},s.label+": "+e.label)});else if(e.hasOwnProperty("search"))g(e.search,function(){addParam(a.indexName,{search:e.search,label:null,newimages:null},s.search+": "+e.search)});else if(e.hasOwnProperty("newimages"))v(e.newimages,function(){addParam(a.indexName,{newimages:e.newimages,search:null,label:null},s.searchNew+": "+e.searchNew)});else if(e.hasOwnProperty("img")){var t=u(encodeURIComponent(e.img));t.length?d().trigger("lightboxLoad",t):removeParam(a.indexName,"img")}}},onSlideshowStart:function(){a.hasOwnProperty("backgroundMusic")&&a.backgroundMusic.slideshowControl&&e(a.backgroundMusic.hook).trigger("startPlayer")},onSlideshowPause:function(){a.hasOwnProperty("backgroundMusic")&&a.backgroundMusic.slideshowControl&&e(a.backgroundMusic.hook).trigger("pausePlayer")}})},C=function(){if(window.location.hash!==r){r=window.location.hash;var e=readParam();if(e.hasOwnProperty("label"))m(e.label,function(){setParam(a.indexName,{label:e.label},s.label+": "+e.label),P()});else if(e.hasOwnProperty("search"))g(e.search,function(){setParam(a.indexName,{search:e.search},s.search+": "+e.search),P()});else if(e.hasOwnProperty("newimages"))v(e.newimages,function(){setParam(a.indexName,{newimages:e.newimages},s.newImages+": "+e.newimages),P()});else if(e.hasOwnProperty("img")){var t=u(e.img);t.length?d().trigger("lightboxLoad",t):removeParam(a.indexName,"img")}else d().trigger("lightboxQuit"),h()}},P=function(){a.hasOwnProperty("share")&&d().trigger("lightboxContainer").is(":visible")&&e(a.share.hook).trigger("updateLinks")};if(readUserPrefs(a,"fitImages"),typeof Album!==UNDEF&&Album.init({makeDate:a.makeDate,indexName:a.indexName,rootPath:a.rootPath,relPath:a.relPath,ready:"index"===a.pageType?function(){var t=Album.getImages();a.hasOwnProperty("skipFirst")&&(t=t.slice(a.skipFirst));var r=Album.getRootProperty(J.SHOP);try{r=JSON.parse(r)}catch(e){r=null}r&&(a.shop=r,e.fn.paypal.defaults.relPath=a.relPath,e.fn.paypal.defaults.rootPath=a.rootPath,e.fn.paypal.defaults.resPath=a.resPath,(o=n.paypal(a.shop))&&(e(a.shop.buttons.selectAll).on("click",function(){return d().trigger("selectAll")}),e(a.shop.buttons.selectNone).on("click",function(){return d().trigger("selectNone")}),e(a.shop.buttons.addSelected).on("click",function(){return o.trigger("addItems",function(t){var n=i.find("article:visible section."+a.thumbContClass),o=[];return n&&(n=n.find("."+a.thumbsClass))?(n.children("."+J.ACTIVE).each(function(){t&&e(this).removeClass(J.ACTIVE),o.push(e(this).data(J.OBJ))}),o):o}(!0)),d().trigger("selectNone"),!1}),e(a.shop.buttons.addAll).on("click",function(){return o.trigger("addItems",function(){var t=i.find("article:visible section."+a.thumbContClass),n=[];return t&&(t=t.find("."+a.thumbsClass))?(t.children().each(function(){n.push(e(this).data(J.OBJ))}),n):n}()),!1}),e.fn.lightbox.defaults.hasOwnProperty("shop")||(e.fn.lightbox.defaults.shop={}),e.fn.lightbox.defaults.shop.root=o)),t.length?(function(){var t=i.children("article:visible").eq(0),n=t.children("section."+a.thumbContClass);if(n.length||(n=e("<section>",{class:a.thumbContClass}).appendTo(t)),!t.data("oly_ns")){var o="oly_"+ +Math.floor(1e4*Math.random());t.data("oly_ns",o).attr("id",o)}return n}().renderThumbs(t,w),a.hasOwnProperty("map")&&a.map.index&&e(".map-root").addMap({markers:function(e){for(var t=[],a=0;a<e.length;a++)e[a].hasOwnProperty("location")&&t.push(e[a].hasOwnProperty("title")?{title:e[a].title,pos:e[a].location,link:e[a].path}:{pos:e[a].location,link:e[a].path});return t}(t),type:a.map.indexType||"roadmap",click:function(){if(this.link){var e=u(this.link);e.length&&(h(),d().trigger("lightboxLoad",e))}}})):window.location.hash&&C(),a.hasOwnProperty("tagCloud")&&(function(){var t=e(a.tagCloud.hook).siblings("form");if(t.length){var n=function(e){var t=e.find("input").eq(0).val();return t&&t.length>1&&m(t,function(){setParam(a.indexName,{label:t},s.label+": "+t),P()}),!1};t.find(".search-btn, button").on("click",function(){return t.find("input").eq(0).focus(),n(t),!1}),t.on("submit",function(e){return e.preventDefault(),n(t),!1})}}(a.tagCloud),Album.collectTags(e.extend(a.tagCloud,{ready:function(){!function(t){if(t.length){var n=e(a.tagCloud.hook);if(n.length){for(var o,i,r,l=function(){var t=e(this).children("span").eq(0).text();return t&&t.length>1&&m(t,function(){setParam(a.indexName,{label:t},s.label+": "+t),P()}),!1},c=0,h=t.length;c<h;c++){if((o=e("<a>",{class:"tag"}).append(e("<span>",{text:t[c][0]}))).on("click",l),t[c][1]>1){if(a.tagCloud.fontVaries){for(i=0,r=Math.min(64,t[c][1]);r>1;)i++,r>>=1;o.addClass("size-"+i)}o.append("&nbsp;").append(e("<sup>",{text:t[c][1]}))}n.append(o)}if(t.length){var d;n.outerHeight()>175&&(n.css({maxHeight:150,overflow:"hidden"}),(d=e("<div>",{class:"toggle-height"})).append(e("<a>",{class:"icon-drop-down",text:" "+s.more}).on("click",function(){var e=n.parent();e.css({height:e.height(),overflow:"hidden"}),n.css({maxHeight:"none"}),setTimeout(function(){var t=n.prop("scrollHeight");e.css({height:"auto",overflow:"visible"}),n.css({maxHeight:150}),setTimeout(function(){n.css({maxHeight:t+20})},25),d.addClass("active")},50)})).append(e("<a>",{class:"icon-drop-up",text:" "+s.less}).on("click",function(){n.css({maxHeight:150}),d.removeClass("active")})),n.after(d))}}}}(this)}}))),a.hasOwnProperty("folderTree")&&e(a.folderTree.hook).append(function(){var t=function(n){if(n.hasOwnProperty(J.FOLDERS)&&n[J.FOLDERS].length){var o,i,s,r,l=n[J.FOLDERS];for(o=e("<ul>"),s=0;s<l.length;s++)r=Album.getRelativeFolderPath(l[s]),(i=e("<li>").appendTo(o)).append(e("<a>",{href:(r?r+"/":"")+a.indexName,html:l[s][J.TITLE]||l[s][J.NAME]||""})).append(t(l[s])),r||i.addClass("actual");return o}return e()};if("tree"===a.folderTree.type)return a.level>0?function(){var t=a.rootPath;return e("<a>",{class:"home-link icon-home",href:(t?t+"/":"")+a.indexName,text:" "+Album.getAlbumTitle()})}().add(t(Album.getTree())):t(Album.getTree());t(Album.getCurrentFolder())}())}:function(){}}),a.hasOwnProperty("showCookiePolicy")&&a.showCookiePolicy&&setTimeout(function(){if(!e.cookie("cookiePolicy")){var t=e("<div>",{id:"cookiepolicy"}).appendTo(n),o=e("<p>",{html:s.cookiePolicyText}).appendTo(t);a.cookiePolicyUrl&&o.append(e("<a>",{text:s.cookiePolicyLearnMore,target:"_blank",href:a.cookiePolicyUrl})),o.append(e("<a>",{class:"btn",text:s.cookiePolicyAgree}).on("click",function(){e("#cookiepolicy").fadeOut(500,function(){e(this).remove()}),e.cookie("cookiePolicy",!0,36e6)})),t.fadeIn(500),setTimeout(function(){e("#cookiepolicy").fadeOut(500,function(){e(this).remove()})},6e3)}},2e3),window.location.search&&removeSearch(),e("."+a.foldersClass).length&&function(){var n=null;a.folderCols>1&&(e("."+a.foldersClass+">li").each(function(t){t%a.folderCols==0&&e(this).css("clear","both")}),e("."+a.foldersClass+">li.preload img").waitAllImg(function(){setTimeout(function(){f(e("."+a.foldersClass+">li.preload"))},100)})),p(),t.on("scroll resize orientationchange",function(e){return clearTimeout(n),n=setTimeout(p,50),!0}),a.folderCols>1&&t.on("resize orientationchange",function(t){return Foundation.MediaQuery.atLeast("medium")?f(e("."+a.foldersClass+">li")):e("."+a.foldersClass+">li").css("height","auto"),!0})}(),a.rightClickProtect&&e("."+a.folderContClass+",."+a.sliderClass).on("contextmenu","img",function(e){return e.preventDefault(),!1}),a.hasOwnProperty("search")&&function(t){if(t.length){a.search=e.extend({depth:"tree",fields:"creator,keywords,title,comment"},a.search);var n="active",o=function(e){var t=e.find("input").eq(0).val();return t&&t.length>1&&g(t,function(){setParam(a.indexName,{search:t},s.search+": "+t),P()}),!1};t.find(".search-btn, button").on("click",function(){return t.hasClass(n)?(o(t),t.removeClass(n)):(t.find("input").eq(0).focus(),t.addClass(n)),!1}),t.on("submit",function(e){return e.preventDefault(),o(t),t.removeClass(n),!1}),t.find("input").on({focus:function(){t.addClass(n)}})}}(e(a.search.hook)),a.hasOwnProperty("share")&&(e(a.share.hook).renderShares(a.share),e.fn.lightbox.defaults.share=a.share.sites),a.hasOwnProperty("searchNew")&&function(t){if(t.length){a.searchNew=e.extend({days:"3,30,90",depth:"folder",reference:"added",sinceLastVisit:!0},a.searchNew);var n=a.searchNew.days.split(",");t.append(e("<span>",{text:b(a.searchNew.reference)}));for(var o=0;o<n.length;o++)t.append(e("<a>",{class:"btn",text:getTimespan(n[o])}).data("days",parseInt(n[o],10)).on("click",function(){y(e(this).data("days"))}));if(a.searchNew.sinceLastVisit){var i=e.cookie("lastVisit"),r=Math.ceil(new Date/864e5);i&&i<r&&t.append(e("<a>",{class:"btn",text:s.sinceMyLastVisit}).on("click",function(){y(r-i)})),e.cookie("lastVisit",r,31536e4)}}}(e(a.searchNew.hook)),a.hasOwnProperty("backgroundMusic")&&e(a.backgroundMusic.hook).audioPlayer(e.extend({rootPath:a.rootPath},a.backgroundMusic)),a.hasOwnProperty("map")&&(a.map.hasOwnProperty("type")&&(e.fn.lightbox.defaults.mapType=a.map.type,e.fn.addMap.defaults.type=a.map.type),a.map.hasOwnProperty("zoom")&&(e.fn.lightbox.defaults.mapZoom=a.map.zoom,e.fn.addMap.defaults.zoom=a.map.zoom),a.map.hasOwnProperty("apiKey")&&(e.fn.addMap.defaults.apiKey=a.map.apiKey)),passDefaults(a,e.fn.lightbox.defaults,"printImage,speed,slideshowDelay,fitImages,scaleUp,fitAboveCaption,extraSizes,videoAuto,rightClickProtect,enableKeyboard,enableMouseWheel"),typeof Newsfeed!==UNDEF&&a.hasOwnProperty("newsfeed")&&Newsfeed.init(a.newsfeed),typeof Instafeed!==UNDEF&&!LOCAL&&a.hasOwnProperty("instagram")){new Instafeed({get:"user",userId:parseInt(a.instagram.token.split(".")[0],10),accessToken:a.instagram.token,limit:a.instagram.limit}).run()}t.on("hashchange",C)},e.fn.skin.defaults={articleHook:"article#main-cont",sliderClass:"slider",thumbContClass:"thumb-cont",folderContClass:"folder-cont",foldersClass:"folders",folderCols:2,indexName:"index.html",thumbsClass:"thumbnails",fixGrid:!1,fitImages:!1,rightClickProtect:!1,enableKeyboard:!0,videoAuto:!0}}(jQuery,$(window),$(document),$("body"));
